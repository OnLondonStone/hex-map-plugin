(()=>{"use strict";var e={985:(e,t,s)=>{s.d(t,{VA:()=>a,fZ:()=>o,zb:()=>n});const a={Template:{codeName:"Name",tradeGoods:{supply:[],demand:[]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:""},As:{codeName:"Asteroid Belt",tradeGoods:{supply:[31,42,44,45,53],demand:[15,21,22,25,32]},modifier:{strength:2,supplyEffect:["Mining"],demandEffect:[]},codeClass:"Planetary"},De:{codeName:"Desert",tradeGoods:{supply:[31,41,42,44,45,51,54],demand:[]},modifier:{strength:1,supplyEffect:["Resource","Mining"],demandEffect:[]},codeClass:"Planetary"},Fl:{codeName:"Fluid Oceans",tradeGoods:{supply:[41,44],demand:[15]},modifier:{strength:.5,supplyEffect:["Resource"],demandEffect:[]},codeClass:"Planetary"},Ga:{codeName:"Garden",tradeGoods:{supply:[33,34,51,55],demand:[]},modifier:{strength:2,supplyEffect:["Resource"],demandEffect:[]},codeClass:"Planetary"},He:{codeName:"Hell-World",tradeGoods:{supply:[],demand:[]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:"Planetary"},Ic:{codeName:"Ice-Capped",tradeGoods:{supply:[31,41,44,53],demand:[15,32]},modifier:{strength:1,supplyEffect:["Resource"],demandEffect:[]},codeClass:"Planetary"},Oc:{codeName:"Ocean World",tradeGoods:{supply:[26,35,41,42,51,54],demand:[]},modifier:{strength:.5,supplyEffect:["Resource"],demandEffect:[]},codeClass:"Planetary"},Va:{codeName:"Vacuum",tradeGoods:{supply:[],demand:[]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:"Planetary"},Wa:{codeName:"Water World",tradeGoods:{supply:[26,35,41,42,51,54],demand:[]},modifier:{strength:1,supplyEffect:["Resource"],demandEffect:[]},codeClass:"Planetary"},Di:{codeName:"Die-Back",tradeGoods:{supply:[],demand:[]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:"Population"},Ba:{codeName:"Barren",tradeGoods:{supply:[],demand:[]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:"Population"},Lo:{codeName:"Low Population",tradeGoods:{supply:[11,12,13,14,15,16,45],demand:[33]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:"Population"},Ni:{codeName:"Non-Industrial",tradeGoods:{supply:[11,12,13,14,15,16,52],demand:[11,12,16,21,22,43,53,56]},modifier:{strength:1,supplyEffect:[],demandEffect:["Consumables","Industrial"]},codeClass:"Population"},Ph:{codeName:"Pre-High Population",tradeGoods:{supply:[11,12,13,14,15,16,35,36,42],demand:[13,15,23,34,51,52,56]},modifier:{strength:.5,supplyEffect:[],demandEffect:["Consumables","Industrial"]},codeClass:"Population"},Hi:{codeName:"High Population",tradeGoods:{supply:[11,12,13,14,15,16,35,36,42],demand:[13,15,23,34,51,52,56]},modifier:{strength:1,supplyEffect:[],demandEffect:["Consumables","Industrial"]},codeClass:"Population"},Pa:{codeName:"Pre-Agricultural",tradeGoods:{supply:[26,33,34,52,54,55],demand:[12,41,46]},modifier:{strength:.5,supplyEffect:["Organic"],demandEffect:["Industrial"]},codeClass:"Output"},Ag:{codeName:"Agricultural",tradeGoods:{supply:[26,33,34,52,54,55],demand:[12,41,46]},modifier:{strength:1,supplyEffect:["Organic"],demandEffect:["Industrial"]},codeClass:"Output"},Na:{codeName:"Non-Agricultural",tradeGoods:{supply:[],demand:[52]},modifier:{strength:1,supplyEffect:[],demandEffect:["Consumables"]},codeClass:"Economic"},Pi:{codeName:"Pre-Industrial",tradeGoods:{supply:[21,22,23,24,25,43,46,56],demand:[14,16,26,31,36,44,45,53,54]},modifier:{strength:.5,supplyEffect:["Industrial"],demandEffect:["Resource","Mining"]},codeClass:"Output"},In:{codeName:"Industrial",tradeGoods:{supply:[21,22,23,24,25,43,46,56],demand:[14,16,26,31,36,44,45,53,54]},modifier:{strength:1,supplyEffect:["Industrial"],demandEffect:["Resource","Mining"]},codeClass:"Output"},Po:{codeName:"Poor",tradeGoods:{supply:[11],demand:[11,14,24,36,51]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:"Economic"},Pr:{codeName:"Pre-Rich",tradeGoods:{supply:[],demand:[21,23,25,31,32,35,36,42,43,44,51,55]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:"Economic"},Ri:{codeName:"Rich",tradeGoods:{supply:[],demand:[21,23,25,31,32,35,36,42,43,44,51,55]},modifier:{strength:1,supplyEffect:[],demandEffect:[]},codeClass:"Economic"}},o=[{id:11,goodsName:"Basic Electronics",goodsClass:"Industrial",basePrice:10},{id:12,goodsName:"Basic Machine Parts",goodsClass:"Industrial",basePrice:10},{id:13,goodsName:"Basic Manufactured Goods",goodsClass:"Industrial",basePrice:10},{id:14,goodsName:"Basic Raw Materials",goodsClass:"Resource",basePrice:5},{id:15,goodsName:"Basic Consumables",goodsClass:"Comsumables",basePrice:2},{id:16,goodsName:"Basic Ore",goodsClass:"Mining",basePrice:1},{id:21,goodsName:"Advanced Electronics",goodsClass:"Industrial",basePrice:100},{id:22,goodsName:"Advanced Machine Parts",goodsClass:"Industrial",basePrice:75},{id:23,goodsName:"Advanced Manufactured Goods",goodsClass:"Industrial",basePrice:100},{id:24,goodsName:"Advanced Weapons",goodsClass:"Industrial",basePrice:150},{id:25,goodsName:"Advanced Vehicles",goodsClass:"Industrial",basePrice:180},{id:26,goodsName:"Biochemicals",goodsClass:"Resource",basePrice:50},{id:31,goodsName:"Crystals and Gems",goodsClass:"Mining",basePrice:20},{id:32,goodsName:"Cybernetics",goodsClass:"Industial",basePrice:250},{id:33,goodsName:"Live Animals",goodsClass:"Resource",basePrice:10},{id:34,goodsName:"Luxury Consumables",goodsClass:"Consumables",basePrice:20},{id:35,goodsName:"Luxury Goods",goodsClass:"Industrial",basePrice:200},{id:36,goodsName:"Medical Supplies",goodsClass:"Industrial",basePrice:50},{id:41,goodsName:"Petrochemicals",goodsClass:"Resource",basePrice:10},{id:42,goodsName:"Pharmaceuticals",goodsClass:"Industrial",basePrice:100},{id:43,goodsName:"Polymers",goodsClass:"Resource",basePrice:7},{id:44,goodsName:"Precious Metals",goodsClass:"Resource",basePrice:50},{id:45,goodsName:"Radioactives",goodsClass:"Resource",basePrice:1e3},{id:46,goodsName:"Robots",goodsClass:"Industrial",basePrice:400},{id:51,goodsName:"Spices",goodsClass:"Comsumables",basePrice:6},{id:52,goodsName:"Textiles",goodsClass:"Industrial",basePrice:3},{id:53,goodsName:"Uncommon Ore",goodsClass:"Mining",basePrice:5},{id:54,goodsName:"Uncommon Raw Materials",goodsClass:"Resource",basePrice:20},{id:55,goodsName:"Wood",goodsClass:"Resource",basePrice:1},{id:56,goodsName:"Vehicles",goodsClass:"Industrial",basePrice:15}],n=[11,12,13,14,15,16]},552:(e,t,s)=>{s.d(t,{u:()=>u,e:()=>p});var a=s(278),o=s(985);class n{constructor(){this.heap=[]}getLeftChildIndex(e){return 2*e+1}getRightChildIndex(e){return 2*e+2}getParentIndex(e){return Math.floor((e-1)/2)}hasLeftChild(e){return this.getLeftChildIndex(e)<this.heap.length}hasRightChild(e){return this.getRightChildIndex(e)<this.heap.length}hasParent(e){return this.getParentIndex(e)>=0}leftChild(e){return this.heap[this.getLeftChildIndex(e)]}rightChild(e){return this.heap[this.getRightChildIndex(e)]}parent(e){return this.heap[this.getParentIndex(e)]}swap(e,t){const s=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=s}peek(){return 0===this.heap.length?null:this.heap[0]}get(){if(0===this.heap.length)return null;const e=this.heap[0];return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.heapifyDown(),e}put(e){this.heap.push(e),this.heapifyUp()}heapifyUp(){let e=this.heap.length-1;for(;this.hasParent(e)&&this.parent(e)>this.heap[e];)this.swap(this.getParentIndex(e),e),e=this.getParentIndex(e)}heapifyDown(){let e=0;for(;this.hasLeftChild(e);){let t=this.getLeftChildIndex(e);if(this.hasRightChild(e)&&this.rightChild(e)<this.leftChild(e)&&(t=this.getRightChildIndex(e)),this.heap[e]<this.heap[t])break;this.swap(e,t),e=t}}isEmpty(){return 0==this.heap.length}}class i{constructor(e,t,s){this.startKey=e,this.endKey=t,this.routeKey=`${e}=>${t}`,this.routeHexesArray=this.findRoute(e,t,s),this.startSystem=(0,a.S5)(e),this.endSystem=(0,a.S5)(t),this.startTradeInfo=this.startSystem.system.economicData.tradeInfo,this.endTradeInfo=this.endSystem.system.economicData.tradeInfo,this.routeTradeCapacity=this.setHighestTradeCapacity(this.startSystem.system.economicData.tradeCapacity,this.endSystem.system.economicData.tradeCapacity),this.tradeRouteVolume=0,this.tradeRouteProfit=0,this.tradeRouteDetails=[]}findRoute(e,t,s){let o=function(e,t,s){const o=new n,i=(0,a.T1)().SectorMap,d=new Map,r=new Map;for(o.put(e),d.set(e,null),r.set(e,0);!o.isEmpty();){let e=o.get(),a=i.get(e).edges;if(e==t)break;a.forEach((t=>{let a=r.get(e)+t.cost;!r.has(t.key)&&a<=t.cost&&a<=s&&(r.set(t.key,a),o.put(t.key),d.set(t.key,e))}))}return d}(e,t,s),i=function(e,t,s){let a=s,o=[];if(e.get(s)){for(;a!=t;)o.push(a),a=e.get(a);return o.push(t),o.reverse(),o}}(o,e,t);return i}setHighestTradeCapacity(e,t){return e>=t?e:t}exchangeGoods(){this.startTradeData.sellingIdArray.forEach((e=>{let t=this.startTradeInfo.supply.find((t=>t.id==e)),s=this.endTradeInfo.demand.find((t=>t.id==e));null!=t&&null!=s&&this.calculateSale(e,t,s,"sell")})),this.startTradeData.buyingIdArray.forEach((e=>{let t=this.startTradeInfo.demand.find((t=>t.id==e)),s=this.endTradeInfo.supply.find((t=>t.id==e));s&&t&&this.calculateSale(e,s,t,"buy")}))}calculateSale(e,t,s,a){let o=t.supplyAmount,n=s.demandAmount,i=[o,n,this.routeTradeCapacity],d=Math.min(...i),r=s.price,l=s.price-t.price,c=!0;(c=!0)&&(o-=d,n-=d,this.tradeRouteVolume+=d,this.tradeRouteProfit+=l,this.tradeRouteDetails.push({exchangeType:a,goodId:e,offerAmount:d,sellPrice:r,profit:l}))}drawConnectingLine(e,t){const s=this.calculateTradeRouteWidth(this.tradeRouteVolume,e),o=this.routeKey,n=document.getElementById("trade-group"),i=(0,a.T1)();if(0==t.length)return;let d=document.createElementNS("http://www.w3.org/2000/svg","path"),r=i.SectorMap.get(t[0]),l=`M${r.centerPoint.x} ${r.centerPoint.y} `;for(let e=1;e<t.length;e++){let s=i.SectorMap.get(t[e]).centerPoint;l+=`L${s.x} ${s.y} `}d.setAttribute("d",l),d.setAttribute("class","tradeLine"),d.setAttribute("id",o),d.setAttribute("style",`fill:none; stroke:red; stroke-width: ${s}`),d.addEventListener("click",this.tradeRouteOnClick),n.appendChild(d)}calculateTradeRouteWidth(e,t){let s,a=e/(t/100*100);return s=20*Math.tanh(a),s<4&&(s=4),s}tradeRouteOnClick(){const e=document.getElementById("hex-container").sectorDataContainer.SectorMap;console.log(this.id);let t=e.get(this.id);console.log(t)}}class d{constructor(e,t,s,a,n){this.techLevel=t,this.govtTier=s,this.tradeCodes=n,this.popRoll=a,this.tradeCapacity=this.setTradeCapacity(this.tradeCodes,this.popRoll),this.tradeInfo=this.setTradeInfo(this.popRoll,this.tradeCodes,o.zb),this.tradeBalance=0,this.tradeRange=this.setTradeRange(this.techLevel,this.tradeCodes),this.tradeRoutes=new Map}setTradeCapacity(e,t){let s,a;return e.includes("Ba")&&(s=0),e.includes("Lo")&&(s=1),e.includes("Ni")&&(s=2),e.includes("Ph")&&(s=4),e.includes("Hi")&&(s=8),a=s*t,a}setTradeInfo(e,t){let s=[],a=[],o={};return t.forEach((t=>{let o=[t];s.push(...this.setSupply(e,o)),a.push(...this.setDemand(e,o))})),o.supply=s,o.demand=a,o=this.setInitialPricing(o),o}setSystemModifiers(e){let t=[];return e.forEach((e=>{t.push(o.VA[e].modifiers)})),t}setSupply(e,t){let s=[],a=[];return t.forEach((t=>{let n=o.VA[t],i=n.tradeGoods.supply;s.push(...i),s.forEach((t=>{let s,o=this.getGoodsDetails(t);s=n.modifier.supplyEffect.includes(o.goodsClass)?10*n.modifier.strength*(e*e):e*e*1,o.supplyAmount=s,a.push({id:o.id,good:o.goodsName,basePrice:o.basePrice,supplyAmount:o.supplyAmount,foundDemand:0})}))})),a}setDemand(e,t){let s=[],a=[];return t.forEach((t=>{let n=o.VA[t],i=n.tradeGoods.demand;s.push(...i),s.forEach((t=>{let s,o=this.getGoodsDetails(t);s=n.modifier.demandEffect.includes(o.goodsClass)?10*n.modifier.strength*(e*e):e*e*1,o.demandAmount=s,a.push({id:o.id,good:o.goodsName,basePrice:o.basePrice,demandAmount:o.demandAmount,foundSupply:0})}))})),a}getGoodsDetails(e){return o.fZ.find((({id:t})=>t===e))}setInitialPricing(e){let t=this.updateSupply(e.supply),s=this.updateDemand(e.demand);return e.supply=t,e.demand=s,e}updateSupply(e){return e.forEach((e=>{e.price=e.basePrice})),e}updateDemand(e){return e.forEach((e=>{e.price=e.basePrice})),e}setTradeRange(e,t){let s=1;return 11==e&&(s=2),12==e&&(s=3),13==e&&(s=4),14==e&&(s=5),e>=15&&(s=6),t.includes("Ba")&&(s=0),s}findTradePartners(e,t){return function(e,t){const s=new n,o=(0,a.T1)().SectorMap,i=[],d=new Map;for(s.put(e),d.set(e,0);!s.isEmpty();){let e=s.get();o.get(e).edges.forEach((a=>{let o=d.get(e)+a.cost;!d.has(a.key)&&o<=a.cost&&o<=t&&(d.set(a.key,o),s.put(a.key),i.push(a.key))}))}return i}(e,t)}setTradeRoutes(e,t){const s=this.tradeRange;t.forEach((t=>{if((0,a.S5)(t).system){let a=new i(e,t,s);this.tradeRoutes.set(t,a)}console.log(this.tradeRoutes)}))}}const r={SIZE:[800,1600,3200,4800,6400,8e3,9600,11200,12800,14400,16e3],GRAVITY:["Negligible",.05,.15,.25,.35,.45,.7,.9,1,1.25,1.4],ATMO:["None","Trace","Very Thin, Tainted","Very Thin","Thin, Tainted","Thin","Standard","Standard, Tainted","Dense","Dense, Tainted","Exotic","Corrosive","Insidious","Dense, High","Thin, Low","Unusual"],PSIMIN:[0,.001,.1,.1,.43,.43,.71,.71,1.5,1.5,.43,.43,.43,1.5,.1,0],PSIMAX:[0,.09,.42,.42,.7,.7,1.49,1.49,2.49,2.49,2.49,2.49,2.49,5,.5,5],HYDROMIN:[0,6,16,26,36,46,56,66,76,86,96],HYDROMAX:[5,15,25,35,45,55,65,75,85,95,100],HYDRO:["Desert World","Dry World","A few small seas","Small seas and oceans","Wet World","Large oceans","","Terran Standard","Water world","Only a few small islands and archipelagos","Almost entirely water","None"],GOV:["None","Company/Corporation","Participating Democracy","Self-Perpetuating Oligarchy","Representative Democracy","Feudal Technocracy","Captive Government","Balkanisation","Civil Service Bureaucracy","Impersonal Bureaucracy","Charismatic Dictator","Non-Charistmatic Dictator","Charismatic Oligarchy","Religious Dictatorship"]},l=[{code:"As",siz:[0],atm:[0],hyd:[0],pop:[],gov:[],law:[]},{code:"De",siz:[],atm:[2,3,4,5,6,7,8,9],hyd:[0],pop:[],gov:[],law:[]},{code:"Fl",siz:[],atm:[10,11,12],hyd:[1,2,3,4,5,6,7,8,9,10],pop:[],gov:[],law:[]},{code:"Ga",siz:[6,7,8],atm:[5,6,8],hyd:[5,6,7],pop:[],gov:[],law:[]},{code:"He",siz:[3,4,5,6,7,8,9,10,11,12],atm:[2,3,7,8,10,11,12],hyd:[0,1,2],pop:[],gov:[],law:[]},{code:"Ic",siz:[],atm:[0,1],hyd:[1,2,3,4,5,6,7,8,9,10],pop:[],gov:[],law:[]},{code:"Oc",siz:[10,11,12],atm:[3,4,5,6,7,8,9,10,11,12],hyd:[10],pop:[],gov:[],law:[]},{code:"Va",siz:[],atm:[0],hyd:[],pop:[],gov:[],law:[]},{code:"Wa",siz:[3,4,5,6,7,8,9,10],atm:[3,4,5,6,7,8,9,10,11,12],hyd:[10],pop:[],gov:[],law:[]},{code:"Ba",siz:[],atm:[],hyd:[],pop:[0],gov:[],law:[]},{code:"Lo",siz:[],atm:[],hyd:[],pop:[1,2,3],gov:[],law:[]},{code:"Ni",siz:[],atm:[],hyd:[],pop:[4,5,6],gov:[],law:[]},{code:"Ph",siz:[],atm:[],hyd:[],pop:[7,8],gov:[],law:[]},{code:"Hi",siz:[],atm:[],hyd:[],pop:[9,10,11,12,13,14,15],gov:[],law:[]},{code:"Pa",siz:[],atm:[4,5,6,7,8,9],hyd:[4,5,6,7,8],pop:[4,8],gov:[],law:[]},{code:"Ag",siz:[],atm:[4,5,6,7,8,9],hyd:[4,5,6,7,8],pop:[5,6,7],gov:[],law:[]},{code:"Na",siz:[],atm:[0,1,2,3],hyd:[],pop:[6,7,8,9,10,11,12,13,14,15],gov:[],law:[]},{code:"Pi",siz:[],atm:[0,1,2,4,7,9],hyd:[],pop:[7,8],gov:[],law:[]},{code:"In",siz:[],atm:[0,1,2,3,7,9,10,11,12],hyd:[],pop:[9,10,11,12,13,14,15],gov:[],law:[]},{code:"Po",siz:[],atm:[2,3,4,5],hyd:[0,1,2,3],pop:[],gov:[],law:[]},{code:"Pr",siz:[],atm:[6,8],hyd:[],pop:[5,9],gov:[],law:[]},{code:"Ri",siz:[],atm:[6,8],hyd:[],pop:[6,7,8],gov:[],law:[]}];class c{constructor(e,t,s){this.id=t,this.centerPoint=s,this.systemRolls=this.setSystemRolls(),this.systemData=this.setSystemData(this.systemRolls),this.uwp=this.setUWP(this.systemRolls),this.economicData=new d(e,this.systemRolls.get("tl"),this.systemRolls.get("government"),this.systemRolls.get("population"),this.systemData.tradeCodes),this.tableData=this.setTableData()}setSystemRolls(){let e=new Map([]),t=(0,a.zP)(2)-2;e.set("planetSize",t);let s=(0,a.zP)(2)-7+e.get("planetSize");s<0&&(s=0),e.set("atmoType",s);let o=0,n=e.get("atmoType");0!==n&&1!==n&&10!==n&&11!==n&&12!==n||(o=-4);let i=(0,a.zP)(2)-7+e.get("planetSize")+o;i<0?e.set("hydroType",0):e.set("hydroType",i);let d=(0,a.zP)(2)-2;e.set("population",d);let r=(0,a.zP)(2)-7+e.get("population"),l=r;r>13&&(l=13),r<0&&(l=0),e.set("government",l);let c=(0,a.zP)(2)-7+l;c<0&&(r=0,c=0),e.set("lawLevel",c);let m,h=(0,a.zP)(2);e.set("starport",h),m=h>=11?6:h>8&&h<11?4:h>6&&h<8?2:h>2&&h<7?0:-4;let u=0;u=t>1&&t<5?1:t<2?2:0;let p=0;(s<4||s>9)&&(p=1);let g=0;0===i||9===i?g=1:10===i&&(g=2);let y=0;d>0&&d<6||9===d?y=1:10===d?y=2:11===d?y=3:12===d&&(y=4);let f=0;0===l||5===l?f=1:7===l?f=2:13!==l&&14!==l||(f=-2);let C=(0,a.zP)(1)+m+u+p+g+y+f;return C<0&&(C=0),e.set("tl",C),e}setSystemData(e){return{systemName:this.generateName(),size:this.setSize(e.get("planetSize")),atmosphere:this.setAtmosphere(e.get("atmoType")),hydrographics:this.setHydrographics(e.get("hydroType"),e.get("planetSize")),population:this.setPopulation(e.get("population")),government:this.setGovernment(e.get("government")),lawLevel:this.setLaw(e.get("lawLevel")),techLevel:this.setTL(e.get("tl")),starport:this.setStarport(e.get("starport")),tradeCodes:this.setTradeCodes(e,l)}}setTableData(){let e,t=this.systemData.population.totalPopulation.toLocaleString(),s=[],a=`${this.systemData.hydrographics.hydroPercent}%`;return this.systemData.tradeCodes.forEach((e=>{s.push(o.VA[e].codeName)})),e=s.join(", "),{UWP:`${this.uwp}`,Name:this.systemData.systemName,Size:`${this.systemData.size.size} km`,Gravity:`${this.systemData.size.gravity} Earth Normal`,Atmosphere:`${this.systemData.atmosphere.atmo} at ${this.systemData.atmosphere.psi} psi.`,Hydropgraphics:a,Population:t,Government:this.systemData.government.governmentType,"Law Level":this.systemData.lawLevel.lawLevel,"Starport Grade":this.systemData.starport,"Tech Level":this.systemData.techLevel.tl,"Trade Code":e}}generateName(){return((e=6)=>Math.random().toString(20).substr(2,e))(6)}setSize(e){let t=e;return{size:r.SIZE[t],gravity:r.GRAVITY[t]}}setAtmosphere(e){let t=e,s=(a=r.PSIMIN[t],o=r.PSIMAX[t],Math.floor(Math.random()*(1e3*o-1e3*a+1+1e3*a))/1e3);var a,o;return{atmo:r.ATMO[t],psi:s}}setHydrographics(e,t){let s=e;e>10&&(e=10);let a=(o=r.HYDROMIN[s],n=r.HYDROMAX[s],Math.floor(Math.random()*(n-o+1+o)*100)/100);var o,n;let i=e;return t<=1&&(a=0,i=11),{hydroPercent:a,hydroDesc:r.HYDRO[s]}}setPopulation(e){let t=e;return{totalPopulation:Math.pow(10,t)+Math.floor(Math.random()*Math.pow(10,t))-1}}setGovernment(e){return{governmentType:r.GOV[e]}}setLaw(e){let t=e;return t>9&&(t=9),t<0&&(t=0),{lawLevel:t}}setStarport(e){let t;return t=e>10?"A":10===e||9===e?"B":8===e||7===e?"C":6===e||5===e?"D":4===e||3===e?"E":"X",t}setTL(e){return{tl:e}}setTradeCodes(e,t){let s=[],a=e.get("planetSize"),o=e.get("atmoType"),n=e.get("hydroType"),i=e.get("population"),d=e.get("government"),r=e.get("lawLevel");return t.forEach((e=>{let t=[];0===e.siz.length||e.siz.includes(a)?t.push(!0):t.push(!1),0===e.atm.length||e.atm.includes(o)?t.push(!0):t.push(!1),0===e.hyd.length||e.hyd.includes(n)?t.push(!0):t.push(!1),0===e.pop.length||e.pop.includes(i)?t.push(!0):t.push(!1),0===e.gov.length||e.gov.includes(d)?t.push(!0):t.push(!1),0===e.law.length||e.law.includes(r)?t.push(!0):t.push(!1),t.includes(!1)||s.push(e.code)})),s}setUWP(e){return`${this.systemData.starport}-${this.numToHex(e.get("planetSize"))}${this.numToHex(e.get("atmoType"))}${this.numToHex(e.get("hydroType"))}${this.numToHex(e.get("population"))}${this.numToHex(e.get("government"))}${this.numToHex(e.get("lawLevel"))}${this.numToHex(e.get("tl"))}`}numToHex(e){let t=e.toString(16);return t=t.toUpperCase(),t}}class m{constructor(e,t,s){this.col=e,this.row=t,this.scale=s,this.TradeMap=new Map,this.systemList=[],this.SectorMap=this.makeSectorMap(this.col,this.row,this.scale,this.systemList)}makeSectorMap(e,t,s,o){const n=new Map;let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("id","hex-container"),i.id="hex-container",document.getElementById("svg-container").appendChild(i);let d=s,r=(t+.5)*(Math.sqrt(3)*d)+6,l=(e+.5)*(1.5*d)+6;document.getElementById("hex-container").setAttribute("height",`${Math.floor(r)}`),document.getElementById("hex-container").setAttribute("width",`${Math.floor(l)}`);let c=document.createElementNS("http://www.w3.org/2000/svg","g");c.setAttribute("id","hex-group"),i.appendChild(c);let m=document.createElementNS("http://www.w3.org/2000/svg","g");m.setAttribute("id","trade-group"),i.appendChild(m);for(let i=0;i<e;i++){let e=i+1;for(let i=0;i<t;i++){let t=new h(e,i+1,s);if(n.set(t.hexKey,t),t.system){let e={hex:t.id,name:t.system.tableData.Name,uwp:t.system.tableData.UWP};a.Pi.set(`Row: ${t.id}`,t.hexKey),a.xi.set(t.hexKey,`Row: ${t.id}`),o.push([t.hexKey,e])}}}return n.forEach((s=>{s.edges=s.setEdges(s.colNum,s.rowNum,s.hexKey,n,e,t)})),n}}class h{constructor(e,t,s){this.colNum=e-1,this.rowNum=t-1,this.hexKey=[this.colNum,this.rowNum],this.hexSize=s,this.centerPoint=this.hexCenter(e,t,s),this.edges,this.id=`${this.colNum},${this.rowNum}`,this.system=this.setSystem(this.id,this.centerPoint),this.moveCost=this.setMoveCost(this.system),this.hexDOM=this.createHex(this.id,this.centerPoint,this.hexSize,this.hexKey)}hexCenter(e,t,s){let a=e*(1.5*s)-s/2+3,o=t*(Math.sqrt(3)*s)-Math.sqrt(3)*s/2+3;return e%2||(o+=Math.sqrt(3)/2*s),{x:a,y:o}}createHex(e,t,s,o){let n=document.createElementNS("http://www.w3.org/2000/svg","polygon"),i=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttribute("points",this.hexPoints(t,s)),n.setAttribute("id",`${e}`),i.setAttribute("class","hex"),i.setAttribute("class","hex-group"),i.addEventListener("click",(()=>{this.hexOnClick(this)})),i.onmouseover=function(){let e=a.xi.get(o),t=document.getElementById("content-container"),s=document.getElementById(e);null!=s&&((0,a.lw)(t,s),s.childNodes.forEach((function(e){e.setAttribute("class","allSystemsCellHover")})))},i.onmouseout=function(){let e=a.xi.get(o),t=(document.getElementById("all-systems-table"),document.getElementById(e));null!=t&&t.childNodes.forEach((function(e){e.setAttribute("class","allSystemsCell")}))},i.appendChild(n),document.getElementById("hex-group").appendChild(i),this.system&&this.setMarker(t,i),n}setSystem(e,t){return(0,a.zP)(1)>3?new c(e,t):null}hexOnClick(e){let t=document.getElementById("system-information-content"),s=document.getElementById("system-trade-content"),o=document.getElementsByClassName("tab-links active"),n=o[0].id;"all-systems"===n&&(o={target:{id:"system-information"}}),"system-information"===n&&(o={target:{id:"system-information"}}),"system-trade"===n&&(o={target:{id:"system-trade"}}),e.system&&(t.hasChildNodes()&&(t.innerHTML=""),s.hasChildNodes()&&(s.innerHTML=""),(0,a.TK)(e.system.tableData),e.system.economicData&&(0,a.ZK)(e.system.economicData),(0,a.AP)(o,e)),document.querySelectorAll(".clicked-hex").forEach((e=>e.setAttribute("class","hex"))),document.getElementById(e.id).setAttribute("class","clicked-hex")}hexPoints(e,t){this.hexCenter();let s=e.x,a=e.y,o="";for(let e=0;e<6;e++){const n=60*e,i=Math.PI/180*n;let d=t*Math.cos(i),r=t*Math.sin(i);d+=s,r+=a,o+=`${Math.floor(d)}, ${Math.floor(r)} `}return o}setMarker(e,t){let s=e.x,a=e.y,o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("cx",s),o.setAttribute("cy",a),o.setAttribute("r",10),o.setAttribute("id","marker"),t.appendChild(o)}setMoveCost(e){let t=1;return e||(t=3),t}setEdges(e,t,s,o,n,i){let d=[],r=1&e;return a.BW[r].forEach((s=>{let a=e+s[0],r=t+s[1];a>=0&&a<=n&&r>=0&&r<=i&&o.forEach(((e,t)=>{e.colNum==a&&e.rowNum==r&&d.push({key:t,cost:e.moveCost})}))})),d}}function u(e){let t,s=e.target.parentElement,o=s.col.value,n=s.row.value,i=s.scale.value;o||(o=8),n||(n=10),i||(i=40),0===document.querySelectorAll("#hex-container").length&&(t=new m(o,n,i)),document.getElementById("tab-display").style.display="block";let d=document.getElementsByClassName("tab-links");for(let e=0;e<d.length;e++)d[e].style.display="block",d[e].addEventListener("click",a.AP);let r=document.getElementsByClassName("tab-links");for(let e=0;e<r.length;e++)r[e].className=r[e].className.replace(" active","");document.getElementById("all-systems").className+=" active",(0,a.gM)(t.systemList),document.getElementById("content-container").style.height=`${document.getElementById("svg-container").offsetHeight}px`,document.getElementById("run-button").style.display="block",document.getElementById("reset-button").style.display="block",document.getElementById("map-generator").style.display="none",document.getElementById("hex-container").sectorDataContainer=t}function p(){if(document.getElementById("map-generator").style.display="inline-flex",document.getElementById("run-button").style.display="none",document.getElementById("reset-button").style.display="none",null!==document.getElementById("system-information-content")){let e=document.getElementById("system-information-content"),t=e.firstElementChild,s=document.getElementById("all-systems-content"),a=s.firstElementChild;null!==t&&e.removeChild(t),null!==a&&s.removeChild(a)}if(document.querySelectorAll("#hex-container").length>0){let e=document.getElementById("svg-container"),t=document.getElementById("hex-container");e.removeChild(t)}document.getElementById("tab-display").style.display="none";let e=document.getElementsByClassName("tab-links");for(let t=0;t<e.length;t++)e[t].style.display="none"}},278:(e,t,s)=>{s.d(t,{AP:()=>c,BW:()=>i,Pi:()=>o,S5:()=>r,T1:()=>d,TK:()=>m,ZK:()=>h,gM:()=>u,lw:()=>p,xi:()=>n,zP:()=>l});var a=s(985);const o=new Map,n=new Map,i=[[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[0,1]],[[1,1],[1,0],[0,-1],[-1,0],[-1,1],[0,1]]];function d(){return document.getElementById("hex-container").sectorDataContainer}function r(e){return d().SectorMap.get(e)}function l(e){let t=0;for(let s=0;s<e;s++)t+=Math.floor(6*Math.random()+1);return t}function c(e){let t,s,a;for(s=document.getElementsByClassName("tab-content"),t=0;t<s.length;t++)s[t].style.display="none";for(a=document.getElementsByClassName("tab-links"),t=0;t<a.length;t++)a[t].className=a[t].className.replace(" active","");let o=e.target.id;document.getElementById(o).className+=" active",null!=o&&(o+="-content",document.getElementById(o).style.display="block")}function m(e){let t=document.getElementById("content-container"),s=document.getElementById("system-information-content");null==s&&(s=document.createElement("div"),s.setAttribute("id","system-information-content"));let a=document.createElement("table");a.setAttribute("class","info-table"),a.setAttribute("id","all-systems-table");let o=[],n=[];for(const t in e)o.push(t),n.push(e[t]);for(let e=0;e<o.length;e++){let t=a.insertRow(e),s=t.insertCell(0),i=t.insertCell(1);s.innerHTML=o[e],i.innerHTML=n[e]}t.appendChild(s),s.appendChild(a)}function h(e){let t=e.tradeInfo.supply,s=e.tradeInfo.demand,o=document.getElementById("content-container"),n=document.getElementById("system-trade-content");null===n&&(n=document.createElement("div"),n.setAttribute("id","system-trade-content"));let i=document.createElement("table"),d=document.createElement("tbody");i.setAttribute("class","info-table");let r=[],l=[],c=a.fZ.map((({goodsName:e})=>e));c.forEach(((e,a)=>{let o=t.find((({good:t})=>t===e));o&&r.push({index:a,amount:o.supplyAmount,price:o.price});let n=s.find((({good:t})=>t===e));n&&l.push({index:a,amount:n.demandAmount,price:n.price})}));let m=document.createElement("tr"),h=document.createElement("td"),u=document.createTextNode("Trade Goods"),p=document.createElement("td"),g=document.createTextNode("Supply"),y=document.createElement("td"),f=document.createTextNode("Demand");h.appendChild(u),p.appendChild(g),y.appendChild(f),m.appendChild(h),m.appendChild(p),m.appendChild(y),d.appendChild(m);for(let e=0;e<c.length;e++){let t=document.createElement("tr"),s=document.createElement("td"),a=document.createElement("td"),o=document.createElement("td"),n=document.createTextNode(c[e]),i=r.find((({index:t})=>t===e)),m=l.find((({index:t})=>t===e)),h=document.createTextNode("Not available"),u=document.createTextNode("Not needed");i&&(h=document.createTextNode(`${i.amount} units, at ${i.price} per unit`)),m&&(u=document.createTextNode(`${m.amount} units, at ${m.price} per unit`)),s.appendChild(n),a.appendChild(h),o.appendChild(u),t.appendChild(s),t.appendChild(a),t.appendChild(o),"Not available"===h.textContent&&"Not needed"===u.textContent||d.appendChild(t)}o.appendChild(n),i.appendChild(d),n.appendChild(i)}function u(e){let t=document.getElementById("all-systems-content"),s=document.createElement("table");document.getElementById("content-container").style.height=`${document.getElementById("svg-container").offsetHeight}px`,s.setAttribute("class","info-table"),s.setAttribute("id","all-systems-table"),t.appendChild(s);let a=s.insertRow(0);a.insertCell(0).innerHTML="Hex",a.insertCell(1).innerHTML="Name",a.insertCell(2).innerHTML="UWP";for(let t=1;t<=e.length;t++){let a=e[t-1][0],n=e[t-1][1],i=s.insertRow(t),d=i.insertCell(0);d.setAttribute("class","allSystemsCell");let l=i.insertCell(1);l.setAttribute("class","allSystemsCell");let c,m=i.insertCell(2);m.setAttribute("class","allSystemsCell"),i.setAttribute("id",`Row: ${a}`),i.setAttribute("class","allSystemsRow"),i.onmouseover=e=>{let t=e.currentTarget.id,s=o.get(t);c=r(s),e.currentTarget.childNodes.forEach((function(e){e.setAttribute("class","allSystemsCellHover")})),document.getElementById(`${c.id}`).setAttribute("class","hover-hex")},i.onmouseout=e=>{let t=e.currentTarget.id,s=o.get(t);c=r(s),e.currentTarget.childNodes.forEach((function(e){e.setAttribute("class","allSystemsCell")}));let a=document.getElementById(`${c.id}`);"clicked-hex"!=a.getAttribute("class")&&a.setAttribute("class","hex")},i.onclick=function(){c.hexOnClick(c),document.getElementById(`${c.id}`).setAttribute("class","clicked-hex")},d.innerHTML=n.hex,l.innerHTML=n.name,m.innerHTML=n.uwp}}function p(e,t){var s=e.getBoundingClientRect(),a=e.clientHeight,o=(e.clientWidth,t.getBoundingClientRect());if(!(o.top>=s.top&&o.bottom<=s.top+a)){const t=o.top-s.top,a=o.bottom-s.bottom;Math.abs(t)<Math.abs(a)?e.scrollTop+=t:e.scrollTop+=a}}}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,s),n.exports}s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=s(552),o=s(278);function n(e,t){e.system&&this.push(t)}document.getElementById("generator-button").addEventListener("click",a.u),document.getElementById("reset-button").addEventListener("click",a.e),document.getElementById("run-button").addEventListener("click",(function(){const e=(0,o.T1)(),t=[];e.SectorMap.forEach(n,t);let s=0;console.log("Beep"),t.forEach((t=>{origin=e.SectorMap.get(t);let s=origin.system.economicData.tradeRange,a=origin.system.economicData.findTradePartners(t,s);a.length>0&&origin.system.economicData.setTradeRoutes(t,a)})),t.forEach((t=>{origin=e.SectorMap.get(t),origin.system.economicData.tradeRoutes.forEach((e=>{e.tradeRouteVolume>s&&(s=e.tradeRouteVolume)}))})),t.forEach((t=>{origin=e.SectorMap.get(t),origin.system.economicData.tradeRoutes.forEach((e=>{e.routeHexesArray.length>0&&e.drawConnectingLine(s,e.routeHexesArray)}))}))}))})();