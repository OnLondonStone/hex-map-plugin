{"version":3,"file":"view.js","mappings":"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","sources":["webpack://hex-map-plugin/./src/modules/economy.js","webpack://hex-map-plugin/./src/modules/economyConstants.js","webpack://hex-map-plugin/./src/modules/makemap.js","webpack://hex-map-plugin/./src/modules/mapCode.js","webpack://hex-map-plugin/./src/modules/pathfinding.js","webpack://hex-map-plugin/./src/modules/simulation.js","webpack://hex-map-plugin/./src/modules/system.js","webpack://hex-map-plugin/./src/modules/systemConstants.js","webpack://hex-map-plugin/./src/modules/tradeRoutes.js","webpack://hex-map-plugin/./src/modules/utilities.js","webpack://hex-map-plugin/webpack/bootstrap","webpack://hex-map-plugin/webpack/runtime/define property getters","webpack://hex-map-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://hex-map-plugin/webpack/runtime/make namespace object","webpack://hex-map-plugin/./src/view.js"],"sourcesContent":["import { TRADECODES, TRADEGOODS, BASICTRADEGOODS } from './economyConstants.js';\nimport { TradeRoute } from './tradeRoutes.js';\nimport { getSectorData, getSystem } from './utilities.js';\nimport { uniformCostSearchSystems } from './pathfinding.js';\n\nexport class Economy {\n\tconstructor( hexKey, techLevel, government, popRoll, tradeCodes ) {\n\t\tthis.techLevel = techLevel;\n\t\tthis.govtTier = government;\n\t\tthis.tradeCodes = tradeCodes;\n\t\tthis.popRoll = popRoll;\n\t\tthis.tradeCapacity = this.setTradeCapacity(\n\t\t\tthis.tradeCodes,\n\t\t\tthis.popRoll\n\t\t);\n\t\tthis.tradeInfo = this.setTradeInfo(\n\t\t\tthis.popRoll,\n\t\t\tthis.tradeCodes,\n\t\t\tBASICTRADEGOODS\n\t\t);\n\t\tthis.tradeBalance = 0;\n\t\tthis.tradeRange = this.setTradeRange( this.techLevel, this.tradeCodes );\n\t\tthis.tradeRoutes = new Map();\n\t}\n\n\tsetTradeCapacity( tradeCodes, pop ) {\n\t\tlet tradeMultiplier;\n\t\tlet tradeCapacity;\n\n\t\tif ( tradeCodes.includes( 'Ba' ) ) {\n\t\t\ttradeMultiplier = 0;\n\t\t}\n\t\tif ( tradeCodes.includes( 'Lo' ) ) {\n\t\t\ttradeMultiplier = 1;\n\t\t}\n\t\tif ( tradeCodes.includes( 'Ni' ) ) {\n\t\t\ttradeMultiplier = 2;\n\t\t}\n\t\tif ( tradeCodes.includes( 'Ph' ) ) {\n\t\t\ttradeMultiplier = 4;\n\t\t}\n\t\tif ( tradeCodes.includes( 'Hi' ) ) {\n\t\t\ttradeMultiplier = 8;\n\t\t}\n\n\t\ttradeCapacity = tradeMultiplier * pop;\n\t\treturn tradeCapacity;\n\t}\n\t//Poss check for duplicated values\n\tsetTradeInfo( pop, tradeCodes ) {\n\t\tlet supplyArray = [];\n\t\tlet demandArray = [];\n\n\t\tlet tradeInfo = {};\n\t\ttradeCodes.forEach( ( code ) => {\n\t\t\tlet codeArray = [ code ];\n\n\t\t\tsupplyArray.push( ...this.setSupply( pop, codeArray ) );\n\t\t\tdemandArray.push( ...this.setDemand( pop, codeArray ) );\n\t\t} );\n\n\t\ttradeInfo.supply = supplyArray;\n\t\ttradeInfo.demand = demandArray;\n\n\t\ttradeInfo = this.setInitialPricing( tradeInfo );\n\n\t\treturn tradeInfo;\n\t}\n\tsetSystemModifiers( tradeCodes ) {\n\t\tlet modifiers = [];\n\n\t\ttradeCodes.forEach( ( code ) => {\n\t\t\tmodifiers.push( TRADECODES[ code ].modifiers );\n\t\t} );\n\n\t\treturn modifiers;\n\t}\n\t//Not working -?\n\tsetSupply( pop, tradeCodes ) {\n\t\tlet supplies = [];\n\t\tlet supplyArray = [];\n\n\t\ttradeCodes.forEach( ( code ) => {\n\t\t\tlet codeConst = TRADECODES[ code ];\n\t\t\tlet newGoods = codeConst.tradeGoods.supply;\n\t\t\tsupplies.push( ...newGoods );\n\n\t\t\tsupplies.forEach( ( good ) => {\n\t\t\t\tlet tradeGood = this.getGoodsDetails( good );\n\t\t\t\tlet supplyAmount;\n\t\t\t\tif (\n\t\t\t\t\tcodeConst.modifier.supplyEffect.includes(\n\t\t\t\t\t\ttradeGood.goodsClass\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tsupplyAmount =\n\t\t\t\t\t\t10 * codeConst.modifier.strength * ( pop * pop );\n\t\t\t\t} else {\n\t\t\t\t\tsupplyAmount = 1 * ( pop * pop );\n\t\t\t\t}\n\t\t\t\ttradeGood.supplyAmount = supplyAmount;\n\t\t\t\tsupplyArray.push( {\n\t\t\t\t\tid: tradeGood.id,\n\t\t\t\t\tgood: tradeGood.goodsName,\n\t\t\t\t\tbasePrice: tradeGood.basePrice,\n\t\t\t\t\tsupplyAmount: tradeGood.supplyAmount,\n\t\t\t\t\tfoundDemand: 0,\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t\treturn supplyArray;\n\t}\n\t//Not working -?\n\tsetDemand( pop, tradeCodes ) {\n\t\tlet demands = [];\n\t\tlet demandsArray = [];\n\n\t\ttradeCodes.forEach( ( code ) => {\n\t\t\tlet codeConst = TRADECODES[ code ];\n\t\t\tlet newGoods = codeConst.tradeGoods.demand;\n\t\t\tdemands.push( ...newGoods );\n\n\t\t\tdemands.forEach( ( good ) => {\n\t\t\t\tlet tradeGood = this.getGoodsDetails( good );\n\t\t\t\tlet demandAmount;\n\t\t\t\tif (\n\t\t\t\t\tcodeConst.modifier.demandEffect.includes(\n\t\t\t\t\t\ttradeGood.goodsClass\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tdemandAmount =\n\t\t\t\t\t\t10 * codeConst.modifier.strength * ( pop * pop );\n\t\t\t\t} else {\n\t\t\t\t\tdemandAmount = 1 * ( pop * pop );\n\t\t\t\t}\n\t\t\t\ttradeGood.demandAmount = demandAmount;\n\t\t\t\tdemandsArray.push( {\n\t\t\t\t\tid: tradeGood.id,\n\t\t\t\t\tgood: tradeGood.goodsName,\n\t\t\t\t\tbasePrice: tradeGood.basePrice,\n\t\t\t\t\tdemandAmount: tradeGood.demandAmount,\n\t\t\t\t\tfoundSupply: 0,\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t\treturn demandsArray;\n\t}\n\tgetGoodsDetails( goodID ) {\n\t\tlet selectedGood = TRADEGOODS.find( ( { id } ) => id === goodID );\n\t\treturn selectedGood;\n\t}\n\tsetInitialPricing( tradeInfo ) {\n\t\tlet updatedSupply = this.updateSupply( tradeInfo.supply );\n\t\tlet updatedDemand = this.updateDemand( tradeInfo.demand );\n\n\t\ttradeInfo.supply = updatedSupply;\n\t\ttradeInfo.demand = updatedDemand;\n\n\t\treturn tradeInfo;\n\t}\n\n\tupdateSupply( supply ) {\n\t\tsupply.forEach( ( good ) => {\n\t\t\tgood.price = good.basePrice;\n\t\t\t//good.price = good.price.toPrecision(4);\n\t\t} );\n\t\treturn supply;\n\t}\n\tupdateDemand( demand ) {\n\t\tdemand.forEach( ( good ) => {\n\t\t\tgood.price = good.basePrice;\n\t\t\t//good.price = good.price.toPrecision(4);\n\t\t} );\n\t\treturn demand;\n\t}\n\tsetTradeRange( tech, tradeCodes ) {\n\t\tlet tradeRange = 1;\n\n\t\tif ( tech == 11 ) {\n\t\t\ttradeRange = 2;\n\t\t}\n\t\tif ( tech == 12 ) {\n\t\t\ttradeRange = 3;\n\t\t}\n\t\tif ( tech == 13 ) {\n\t\t\ttradeRange = 4;\n\t\t}\n\t\tif ( tech == 14 ) {\n\t\t\ttradeRange = 5;\n\t\t}\n\t\tif ( tech >= 15 ) {\n\t\t\ttradeRange = 6;\n\t\t}\n\n\t\tif ( tradeCodes.includes( 'Ba' ) ) {\n\t\t\ttradeRange = 0;\n\t\t}\n\n\t\treturn tradeRange;\n\t}\n\tfindTradePartners( startKey, tradeRange ) {\n\t\tlet tradePartnersList = uniformCostSearchSystems(\n\t\t\tstartKey,\n\t\t\ttradeRange\n\t\t);\n\t\t//Returns an array of hexKeys\n\t\treturn tradePartnersList;\n\t}\n\t//This is a map, called from runSimulation, hexKey is origin\n\tsetTradeRoutes( startKey, tradePartnersList ) {\n\t\tconst tradeRange = this.tradeRange;\n\t\ttradePartnersList.forEach( ( hexKey ) => {\n\t\t\tlet hex = getSystem( hexKey );\n\t\t\tif ( hex.system ) {\n\t\t\t\tlet tradeRoute = new TradeRoute( startKey, hexKey, tradeRange );\n\t\t\t\tthis.tradeRoutes.set( hexKey, tradeRoute );\n\t\t\t}\n\t\t\tconsole.log( this.tradeRoutes );\n\t\t} );\n\t}\n}\n","//Change TradeCodes to array?\n//Supply Demand Rework\n//Supply\n//In - 7-8, 9-F\n//Ag - 4, 8 - 5-7\nexport const TRADECODES = {\n\tTemplate: {\n\t\tcodeName: 'Name',\n\t\t//Poss replace with supplies and demands\n\t\ttradeGoods: { supply: [], demand: [] },\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: '',\n\t},\n\tAs: {\n\t\tcodeName: 'Asteroid Belt',\n\t\ttradeGoods: {\n\t\t\tsupply: [ 31, 42, 44, 45, 53 ],\n\t\t\tdemand: [ 15, 21, 22, 25, 32 ],\n\t\t},\n\t\tmodifier: { strength: 2, supplyEffect: [ 'Mining' ], demandEffect: [] },\n\t\tcodeClass: 'Planetary',\n\t},\n\tDe: {\n\t\tcodeName: 'Desert',\n\t\ttradeGoods: { supply: [ 31, 41, 42, 44, 45, 51, 54 ], demand: [] },\n\t\tmodifier: {\n\t\t\tstrength: 1,\n\t\t\tsupplyEffect: [ 'Resource', 'Mining' ],\n\t\t\tdemandEffect: [],\n\t\t},\n\t\tcodeClass: 'Planetary',\n\t},\n\tFl: {\n\t\tcodeName: 'Fluid Oceans',\n\t\ttradeGoods: { supply: [ 41, 44 ], demand: [ 15 ] },\n\t\tmodifier: {\n\t\t\tstrength: 0.5,\n\t\t\tsupplyEffect: [ 'Resource' ],\n\t\t\tdemandEffect: [],\n\t\t},\n\t\tcodeClass: 'Planetary',\n\t},\n\tGa: {\n\t\tcodeName: 'Garden',\n\t\ttradeGoods: { supply: [ 33, 34, 51, 55 ], demand: [] },\n\t\tmodifier: {\n\t\t\tstrength: 2,\n\t\t\tsupplyEffect: [ 'Resource' ],\n\t\t\tdemandEffect: [],\n\t\t},\n\t\tcodeClass: 'Planetary',\n\t},\n\tHe: {\n\t\tcodeName: 'Hell-World',\n\t\ttradeGoods: { supply: [], demand: [] },\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: 'Planetary',\n\t},\n\tIc: {\n\t\tcodeName: 'Ice-Capped',\n\t\ttradeGoods: { supply: [ 31, 41, 44, 53 ], demand: [ 15, 32 ] },\n\t\tmodifier: {\n\t\t\tstrength: 1,\n\t\t\tsupplyEffect: [ 'Resource' ],\n\t\t\tdemandEffect: [],\n\t\t},\n\t\tcodeClass: 'Planetary',\n\t},\n\tOc: {\n\t\tcodeName: 'Ocean World',\n\t\ttradeGoods: { supply: [ 26, 35, 41, 42, 51, 54 ], demand: [] },\n\t\tmodifier: {\n\t\t\tstrength: 0.5,\n\t\t\tsupplyEffect: [ 'Resource' ],\n\t\t\tdemandEffect: [],\n\t\t},\n\t\tcodeClass: 'Planetary',\n\t},\n\tVa: {\n\t\tcodeName: 'Vacuum',\n\t\ttradeGoods: { supply: [], demand: [] },\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: 'Planetary',\n\t},\n\tWa: {\n\t\tcodeName: 'Water World',\n\t\ttradeGoods: { supply: [ 26, 35, 41, 42, 51, 54 ], demand: [] },\n\t\tmodifier: {\n\t\t\tstrength: 1,\n\t\t\tsupplyEffect: [ 'Resource' ],\n\t\t\tdemandEffect: [],\n\t\t},\n\t\tcodeClass: 'Planetary',\n\t},\n\tDi: {\n\t\tcodeName: 'Die-Back',\n\t\ttradeGoods: { supply: [], demand: [] },\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: 'Population',\n\t},\n\tBa: {\n\t\tcodeName: 'Barren',\n\t\ttradeGoods: { supply: [], demand: [] },\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: 'Population',\n\t},\n\tLo: {\n\t\tcodeName: 'Low Population',\n\t\ttradeGoods: { supply: [ 11, 12, 13, 14, 15, 16, 45 ], demand: [ 33 ] },\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: 'Population',\n\t},\n\tNi: {\n\t\tcodeName: 'Non-Industrial',\n\t\ttradeGoods: {\n\t\t\tsupply: [ 11, 12, 13, 14, 15, 16, 52 ],\n\t\t\tdemand: [ 11, 12, 16, 21, 22, 43, 53, 56 ],\n\t\t},\n\t\tmodifier: {\n\t\t\tstrength: 1,\n\t\t\tsupplyEffect: [],\n\t\t\tdemandEffect: [ 'Consumables', 'Industrial' ],\n\t\t},\n\t\tcodeClass: 'Population',\n\t},\n\tPh: {\n\t\tcodeName: 'Pre-High Population',\n\t\ttradeGoods: {\n\t\t\tsupply: [ 11, 12, 13, 14, 15, 16, 35, 36, 42 ],\n\t\t\tdemand: [ 13, 15, 23, 34, 51, 52, 56 ],\n\t\t},\n\t\tmodifier: {\n\t\t\tstrength: 0.5,\n\t\t\tsupplyEffect: [],\n\t\t\tdemandEffect: [ 'Consumables', 'Industrial' ],\n\t\t},\n\t\tcodeClass: 'Population',\n\t},\n\tHi: {\n\t\tcodeName: 'High Population',\n\t\ttradeGoods: {\n\t\t\tsupply: [ 11, 12, 13, 14, 15, 16, 35, 36, 42 ],\n\t\t\tdemand: [ 13, 15, 23, 34, 51, 52, 56 ],\n\t\t},\n\t\tmodifier: {\n\t\t\tstrength: 1,\n\t\t\tsupplyEffect: [],\n\t\t\tdemandEffect: [ 'Consumables', 'Industrial' ],\n\t\t},\n\t\tcodeClass: 'Population',\n\t},\n\tPa: {\n\t\tcodeName: 'Pre-Agricultural',\n\t\ttradeGoods: {\n\t\t\tsupply: [ 26, 33, 34, 52, 54, 55 ],\n\t\t\tdemand: [ 12, 41, 46 ],\n\t\t},\n\t\tmodifier: {\n\t\t\tstrength: 0.5,\n\t\t\tsupplyEffect: [ 'Organic' ],\n\t\t\tdemandEffect: [ 'Industrial' ],\n\t\t},\n\t\tcodeClass: 'Output',\n\t},\n\tAg: {\n\t\tcodeName: 'Agricultural',\n\t\ttradeGoods: {\n\t\t\tsupply: [ 26, 33, 34, 52, 54, 55 ],\n\t\t\tdemand: [ 12, 41, 46 ],\n\t\t},\n\t\tmodifier: {\n\t\t\tstrength: 1,\n\t\t\tsupplyEffect: [ 'Organic' ],\n\t\t\tdemandEffect: [ 'Industrial' ],\n\t\t},\n\t\tcodeClass: 'Output',\n\t},\n\tNa: {\n\t\tcodeName: 'Non-Agricultural',\n\t\ttradeGoods: { supply: [], demand: [ 52 ] },\n\t\tmodifier: {\n\t\t\tstrength: 1,\n\t\t\tsupplyEffect: [],\n\t\t\tdemandEffect: [ 'Consumables' ],\n\t\t},\n\t\tcodeClass: 'Economic',\n\t},\n\tPi: {\n\t\tcodeName: 'Pre-Industrial',\n\t\ttradeGoods: {\n\t\t\tsupply: [ 21, 22, 23, 24, 25, 43, 46, 56 ],\n\t\t\tdemand: [ 14, 16, 26, 31, 36, 44, 45, 53, 54 ],\n\t\t},\n\t\tmodifier: {\n\t\t\tstrength: 0.5,\n\t\t\tsupplyEffect: [ 'Industrial' ],\n\t\t\tdemandEffect: [ 'Resource', 'Mining' ],\n\t\t},\n\t\tcodeClass: 'Output',\n\t},\n\tIn: {\n\t\tcodeName: 'Industrial',\n\t\ttradeGoods: {\n\t\t\tsupply: [ 21, 22, 23, 24, 25, 43, 46, 56 ],\n\t\t\tdemand: [ 14, 16, 26, 31, 36, 44, 45, 53, 54 ],\n\t\t},\n\t\tmodifier: {\n\t\t\tstrength: 1,\n\t\t\tsupplyEffect: [ 'Industrial' ],\n\t\t\tdemandEffect: [ 'Resource', 'Mining' ],\n\t\t},\n\t\tcodeClass: 'Output',\n\t},\n\tPo: {\n\t\tcodeName: 'Poor',\n\t\ttradeGoods: { supply: [ 11 ], demand: [ 11, 14, 24, 36, 51 ] },\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: 'Economic',\n\t},\n\tPr: {\n\t\tcodeName: 'Pre-Rich',\n\t\ttradeGoods: {\n\t\t\tsupply: [],\n\t\t\tdemand: [ 21, 23, 25, 31, 32, 35, 36, 42, 43, 44, 51, 55 ],\n\t\t},\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: 'Economic',\n\t},\n\tRi: {\n\t\tcodeName: 'Rich',\n\t\ttradeGoods: {\n\t\t\tsupply: [],\n\t\t\tdemand: [ 21, 23, 25, 31, 32, 35, 36, 42, 43, 44, 51, 55 ],\n\t\t},\n\t\tmodifier: { strength: 1, supplyEffect: [], demandEffect: [] },\n\t\tcodeClass: 'Economic',\n\t},\n};\n//Supply Output = Pop * *(0.5 if poor, 2 if Rich, 1.5 if Pre-Rich)\n//Demand =\n// Classes = Basic/Advanced Industrial, Basic/Advanced Resource, Basic/Advanced Organic, Luxury, Basic/Advanced Comsumables\n\nexport const TRADEGOODS = [\n\t{\n\t\tid: 11,\n\t\tgoodsName: 'Basic Electronics',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 10,\n\t},\n\t{\n\t\tid: 12,\n\t\tgoodsName: 'Basic Machine Parts',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 10,\n\t},\n\t{\n\t\tid: 13,\n\t\tgoodsName: 'Basic Manufactured Goods',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 10,\n\t},\n\t{\n\t\tid: 14,\n\t\tgoodsName: 'Basic Raw Materials',\n\t\tgoodsClass: 'Resource',\n\t\tbasePrice: 5,\n\t},\n\t{\n\t\tid: 15,\n\t\tgoodsName: 'Basic Consumables',\n\t\tgoodsClass: 'Comsumables',\n\t\tbasePrice: 2,\n\t},\n\t{ id: 16, goodsName: 'Basic Ore', goodsClass: 'Mining', basePrice: 1 },\n\n\t{\n\t\tid: 21,\n\t\tgoodsName: 'Advanced Electronics',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 100,\n\t},\n\t{\n\t\tid: 22,\n\t\tgoodsName: 'Advanced Machine Parts',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 75,\n\t},\n\t{\n\t\tid: 23,\n\t\tgoodsName: 'Advanced Manufactured Goods',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 100,\n\t},\n\t{\n\t\tid: 24,\n\t\tgoodsName: 'Advanced Weapons',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 150,\n\t},\n\t{\n\t\tid: 25,\n\t\tgoodsName: 'Advanced Vehicles',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 180,\n\t},\n\n\t{\n\t\tid: 26,\n\t\tgoodsName: 'Biochemicals',\n\t\tgoodsClass: 'Resource',\n\t\tbasePrice: 50,\n\t},\n\t{\n\t\tid: 31,\n\t\tgoodsName: 'Crystals and Gems',\n\t\tgoodsClass: 'Mining',\n\t\tbasePrice: 20,\n\t},\n\t{\n\t\tid: 32,\n\t\tgoodsName: 'Cybernetics',\n\t\tgoodsClass: 'Industial',\n\t\tbasePrice: 250,\n\t},\n\t{\n\t\tid: 33,\n\t\tgoodsName: 'Live Animals',\n\t\tgoodsClass: 'Resource',\n\t\tbasePrice: 10,\n\t},\n\t{\n\t\tid: 34,\n\t\tgoodsName: 'Luxury Consumables',\n\t\tgoodsClass: 'Consumables',\n\t\tbasePrice: 20,\n\t},\n\t{\n\t\tid: 35,\n\t\tgoodsName: 'Luxury Goods',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 200,\n\t},\n\t{\n\t\tid: 36,\n\t\tgoodsName: 'Medical Supplies',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 50,\n\t},\n\t{\n\t\tid: 41,\n\t\tgoodsName: 'Petrochemicals',\n\t\tgoodsClass: 'Resource',\n\t\tbasePrice: 10,\n\t},\n\t{\n\t\tid: 42,\n\t\tgoodsName: 'Pharmaceuticals',\n\t\tgoodsClass: 'Industrial',\n\t\tbasePrice: 100,\n\t},\n\t{ id: 43, goodsName: 'Polymers', goodsClass: 'Resource', basePrice: 7 },\n\t{\n\t\tid: 44,\n\t\tgoodsName: 'Precious Metals',\n\t\tgoodsClass: 'Resource',\n\t\tbasePrice: 50,\n\t},\n\t{\n\t\tid: 45,\n\t\tgoodsName: 'Radioactives',\n\t\tgoodsClass: 'Resource',\n\t\tbasePrice: 1000,\n\t},\n\t{ id: 46, goodsName: 'Robots', goodsClass: 'Industrial', basePrice: 400 },\n\t{ id: 51, goodsName: 'Spices', goodsClass: 'Comsumables', basePrice: 6 },\n\t{ id: 52, goodsName: 'Textiles', goodsClass: 'Industrial', basePrice: 3 },\n\t{ id: 53, goodsName: 'Uncommon Ore', goodsClass: 'Mining', basePrice: 5 },\n\t{\n\t\tid: 54,\n\t\tgoodsName: 'Uncommon Raw Materials',\n\t\tgoodsClass: 'Resource',\n\t\tbasePrice: 20,\n\t},\n\t{ id: 55, goodsName: 'Wood', goodsClass: 'Resource', basePrice: 1 },\n\t{ id: 56, goodsName: 'Vehicles', goodsClass: 'Industrial', basePrice: 15 },\n];\n//Currently not being used - fold into\nexport const BASICTRADEGOODS = [ 11, 12, 13, 14, 15, 16 ];\n","import {\n\topenTab,\n\tgenerateInfoBox,\n\tgenerateTradeBox,\n\trollDice,\n\tdirection_differences,\n\tDOMIdToHexKeyMap,\n\tHexKeyToDOMIdMap,\n\tscrollParentToChild,\n} from './utilities.js';\nimport { System } from './system.js';\n//TRY AND REPLACE ALL USES OF map with SECTOR if Map\n\nexport class Sector {\n\tconstructor( col, row, scale ) {\n\t\tthis.col = col;\n\t\tthis.row = row;\n\t\tthis.scale = scale;\n\t\tthis.TradeMap = new Map();\n\t\tthis.systemList = [];\n\n\t\tthis.SectorMap = this.makeSectorMap(\n\t\t\tthis.col,\n\t\t\tthis.row,\n\t\t\tthis.scale,\n\t\t\tthis.systemList\n\t\t);\n\t}\n\n\t//Creates\n\tmakeSectorMap( col, row, scale, systemList ) {\n\t\tconst SectorMap = new Map();\n\t\tlet hexContainer = document.createElementNS(\n\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t'svg'\n\t\t);\n\t\thexContainer.setAttribute( 'id', 'hex-container' );\n\t\thexContainer.id = 'hex-container';\n\t\tdocument.getElementById( 'svg-container' ).appendChild( hexContainer );\n\t\t//Fix width;\n\t\tlet margin = 3;\n\t\tlet r = scale;\n\t\tlet svgHeight = ( row + 0.5 ) * ( Math.sqrt( 3 ) * r ) + margin * 2;\n\t\tlet svgWidth = ( col + 0.5 ) * ( ( 3 / 2 ) * r ) + margin * 2;\n\t\tdocument\n\t\t\t.getElementById( 'hex-container' )\n\t\t\t.setAttribute( 'height', `${ Math.floor( svgHeight ) }` );\n\t\tdocument\n\t\t\t.getElementById( 'hex-container' )\n\t\t\t.setAttribute( 'width', `${ Math.floor( svgWidth ) }` );\n\n\t\t//Switching order of hex and trade group makes each clickable - implement toggle?\n\n\t\tlet hexGroup = document.createElementNS(\n\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t'g'\n\t\t);\n\t\thexGroup.setAttribute( 'id', 'hex-group' );\n\t\thexContainer.appendChild( hexGroup );\n\n\t\tlet tradeGroup = document.createElementNS(\n\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t'g'\n\t\t);\n\t\ttradeGroup.setAttribute( 'id', 'trade-group' );\n\t\thexContainer.appendChild( tradeGroup );\n\n\t\tfor ( let c = 0; c < col; c++ ) {\n\t\t\tlet colNum = c + 1;\n\t\t\tfor ( let r = 0; r < row; r++ ) {\n\t\t\t\tlet rowNum = r + 1;\n\t\t\t\tlet hex = new Hex( colNum, rowNum, scale );\n\t\t\t\tSectorMap.set( hex.hexKey, hex );\n\n\t\t\t\tif ( hex.system ) {\n\t\t\t\t\tlet tableRow = {\n\t\t\t\t\t\thex: hex.id,\n\t\t\t\t\t\tname: hex.system.tableData.Name,\n\t\t\t\t\t\tuwp: hex.system.tableData.UWP,\n\t\t\t\t\t};\n\t\t\t\t\tDOMIdToHexKeyMap.set( `Row: ${ hex.id }`, hex.hexKey );\n\t\t\t\t\tHexKeyToDOMIdMap.set( hex.hexKey, `Row: ${ hex.id }` );\n\t\t\t\t\tsystemList.push( [ hex.hexKey, tableRow ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSectorMap.forEach( ( hex ) => {\n\t\t\thex.edges = hex.setEdges(\n\t\t\t\thex.colNum,\n\t\t\t\thex.rowNum,\n\t\t\t\thex.hexKey,\n\t\t\t\tSectorMap,\n\t\t\t\tcol,\n\t\t\t\trow\n\t\t\t);\n\t\t} );\n\t\treturn SectorMap;\n\t}\n}\n\n//Bring up to standard - half done\nexport class Hex {\n\tconstructor( col, row, hexSize ) {\n\t\t//Hexes are 0 index\n\t\tthis.colNum = col - 1;\n\t\tthis.rowNum = row - 1;\n\t\tthis.hexKey = [ this.colNum, this.rowNum ];\n\t\tthis.hexSize = hexSize;\n\t\tthis.centerPoint = this.hexCenter( col, row, hexSize );\n\t\tthis.edges;\n\t\tthis.id = `${ this.colNum },${ this.rowNum }`;\n\t\tthis.system = this.setSystem( this.id, this.centerPoint );\n\t\tthis.moveCost = this.setMoveCost( this.system );\n\t\tthis.hexDOM = this.createHex(\n\t\t\tthis.id,\n\t\t\tthis.centerPoint,\n\t\t\tthis.hexSize,\n\t\t\tthis.hexKey\n\t\t);\n\t}\n\t//Returns center point of given col and row values\n\thexCenter( col, row, hexSize ) {\n\t\tlet margin = 3;\n\t\tlet x = col * ( ( 3 / 2 ) * hexSize ) - hexSize / 2 + margin;\n\t\tlet y =\n\t\t\trow * ( Math.sqrt( 3 ) * hexSize ) -\n\t\t\t( Math.sqrt( 3 ) * hexSize ) / 2 +\n\t\t\tmargin;\n\t\t//2nd Column offset\n\t\tif ( ! ( col % 2 ) ) {\n\t\t\ty += ( Math.sqrt( 3 ) / 2 ) * hexSize;\n\t\t}\n\t\treturn { x: x, y: y };\n\t}\n\t//Creates hex element\n\tcreateHex( id, centerpoint, hexSize, hexKey ) {\n\t\tlet newHex = document.createElementNS(\n\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t'polygon'\n\t\t);\n\t\tlet newHexGroup = document.createElementNS(\n\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t'g'\n\t\t);\n\n\t\tnewHex.setAttribute( 'points', this.hexPoints( centerpoint, hexSize ) );\n\t\tnewHex.setAttribute( 'id', `${ id }` );\n\t\tnewHexGroup.setAttribute( 'class', 'hex' );\n\n\t\t//Adds onclick event\n\t\tnewHexGroup.setAttribute( 'class', 'hex-group' );\n\t\tnewHexGroup.addEventListener( 'click', () => {\n\t\t\tthis.hexOnClick( this );\n\t\t} );\n\n\t\t//Adds hover\n\t\tnewHexGroup.onmouseover = function () {\n\t\t\tlet rowId = HexKeyToDOMIdMap.get( hexKey );\n\t\t\tlet container = document.getElementById( 'content-container' );\n\t\t\tlet relatedTableEntry = document.getElementById( rowId );\n\t\t\tif ( relatedTableEntry != null ) {\n\t\t\t\tscrollParentToChild( container, relatedTableEntry );\n\t\t\t\tlet rowCells = relatedTableEntry.childNodes;\n\t\t\t\trowCells.forEach( function ( cell ) {\n\t\t\t\t\tcell.setAttribute( 'class', 'allSystemsCellHover' );\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t\tnewHexGroup.onmouseout = function () {\n\t\t\tlet rowId = HexKeyToDOMIdMap.get( hexKey );\n\t\t\tlet table = document.getElementById( 'all-systems-table' );\n\t\t\tlet relatedTableEntry = document.getElementById( rowId );\n\t\t\tif ( relatedTableEntry != null ) {\n\t\t\t\tlet rowCells = relatedTableEntry.childNodes;\n\t\t\t\trowCells.forEach( function ( cell ) {\n\t\t\t\t\tcell.setAttribute( 'class', 'allSystemsCell' );\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\n\t\t//Adds the new hex element to container\n\t\tnewHexGroup.appendChild( newHex );\n\t\tdocument.getElementById( 'hex-group' ).appendChild( newHexGroup );\n\n\t\tif ( this.system ) {\n\t\t\tthis.setMarker( centerpoint, newHexGroup );\n\t\t}\n\t\treturn newHex;\n\t}\n\tsetSystem( id, centerPoint ) {\n\t\tif ( rollDice( 1 ) > 3 ) {\n\t\t\treturn new System( id, centerPoint );\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\thexOnClick( hex ) {\n\t\tlet info = document.getElementById( 'system-information-content' );\n\t\tlet trade = document.getElementById( 'system-trade-content' );\n\t\tlet currentTab = document.getElementsByClassName( 'tab-links active' );\n\t\tlet currentTabID = currentTab[ 0 ].id;\n\t\t//Bad - case switch?\n\t\tif ( currentTabID === 'all-systems' ) {\n\t\t\tcurrentTab = { target: { id: 'system-information' } };\n\t\t}\n\t\tif ( currentTabID === 'system-information' ) {\n\t\t\tcurrentTab = { target: { id: 'system-information' } };\n\t\t}\n\t\tif ( currentTabID === 'system-trade' ) {\n\t\t\tcurrentTab = { target: { id: 'system-trade' } };\n\t\t}\n\n\t\tif ( hex.system ) {\n\t\t\tif ( info.hasChildNodes() ) {\n\t\t\t\tinfo.innerHTML = '';\n\t\t\t}\n\t\t\tif ( trade.hasChildNodes() ) {\n\t\t\t\ttrade.innerHTML = '';\n\t\t\t}\n\t\t\tgenerateInfoBox( hex.system.tableData );\n\t\t\tif ( hex.system.economicData ) {\n\t\t\t\tgenerateTradeBox( hex.system.economicData );\n\t\t\t}\n\t\t\topenTab( currentTab, hex );\n\t\t}\n\n\t\tdocument\n\t\t\t.querySelectorAll( '.clicked-hex' )\n\t\t\t.forEach( ( hex ) => hex.setAttribute( 'class', 'hex' ) );\n\t\tdocument\n\t\t\t.getElementById( hex.id )\n\t\t\t.setAttribute( 'class', 'clicked-hex' );\n\t}\n\t//Gets from hexCenter(), creates points for hex polygon\n\thexPoints( centerpoint, hexSize ) {\n\t\tthis.hexCenter();\n\t\tlet x = centerpoint.x;\n\t\tlet y = centerpoint.y;\n\t\tlet points = ``;\n\n\t\t//Create Points list\n\t\tfor ( let i = 0; i < 6; i++ ) {\n\t\t\tconst angleDeg = 60 * i;\n\t\t\tconst angleRad = ( Math.PI / 180 ) * angleDeg;\n\t\t\tlet xPoint = hexSize * Math.cos( angleRad );\n\t\t\tlet yPoint = hexSize * Math.sin( angleRad );\n\t\t\t//Above gives pixel coordinates at a 0,0 point.\n\t\t\t//Now to translate that to correct location.\n\t\t\txPoint += x;\n\t\t\tyPoint += y;\n\t\t\tpoints += `${ Math.floor( xPoint ) }, ${ Math.floor( yPoint ) } `;\n\t\t}\n\t\treturn points;\n\t}\n\tsetMarker( centerpoint, newHex ) {\n\t\t//Useful code for creating a dot at the middle of a hex.\n\t\tlet cx = centerpoint.x;\n\t\tlet cy = centerpoint.y;\n\n\t\tlet mark = document.createElementNS(\n\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t'circle'\n\t\t);\n\t\tmark.setAttribute( 'cx', cx );\n\t\tmark.setAttribute( 'cy', cy );\n\t\tmark.setAttribute( 'r', 10 );\n\t\tmark.setAttribute( 'id', 'marker' );\n\t\tnewHex.appendChild( mark );\n\t}\n\tsetMoveCost( system ) {\n\t\tlet cost = 1;\n\t\tif ( ! system ) {\n\t\t\tcost = 3;\n\t\t}\n\t\treturn cost;\n\t}\n\tsetEdges( col, row, hexKey, SectorMap, colMax, rowMax ) {\n\t\tlet edges = [];\n\t\tlet parity = col & 1;\n\t\tlet dif = direction_differences[ parity ];\n\t\tdif.forEach( ( direction ) => {\n\t\t\tlet edgeCol = col + direction[ 0 ];\n\t\t\tlet edgeRow = row + direction[ 1 ];\n\t\t\tif (\n\t\t\t\tedgeCol >= 0 &&\n\t\t\t\tedgeCol <= colMax &&\n\t\t\t\tedgeRow >= 0 &&\n\t\t\t\tedgeRow <= rowMax\n\t\t\t) {\n\t\t\t\t//Have to find each edge's key from col and row. I guess it saves having to do it each time by saving it to the hex object?\n\t\t\t\tSectorMap.forEach( ( hex, key ) => {\n\t\t\t\t\tif ( hex.colNum == edgeCol && hex.rowNum == edgeRow ) {\n\t\t\t\t\t\tedges.push( { key: key, cost: hex.moveCost } );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t\treturn edges;\n\t}\n}\n","import { Sector } from './makemap.js';\nimport { openTab, allSystemsTable } from './utilities.js';\n//Data structure:\n//document.getElementById(\"hex-container\").sectorDataContainer.sector.SectorMap.get([hexKey]);\n\nexport function generateMap( e ) {\n\tlet dataContainer;\n\tlet gen = e.target.parentElement;\n\t//Uses default values:\n\tlet col = gen.col.value;\n\tlet row = gen.row.value;\n\tlet scale = gen.scale.value;\n\t//Gets user input col and row values or uses default:\n\tif ( ! col ) {\n\t\tcol = 8;\n\t}\n\tif ( ! row ) {\n\t\trow = 10;\n\t}\n\tif ( ! scale ) {\n\t\tscale = 40;\n\t}\n\tif ( document.querySelectorAll( '#hex-container' ).length === 0 ) {\n\t\tdataContainer = new Sector( col, row, scale );\n\t}\n\t//Creates Tab Display\n\tdocument.getElementById( 'tab-display' ).style.display = 'block';\n\tlet tab = document.getElementsByClassName( 'tab-links' );\n\tfor ( let t = 0; t < tab.length; t++ ) {\n\t\ttab[ t ].style.display = 'block';\n\t\ttab[ t ].addEventListener( 'click', openTab );\n\t}\n\tlet tabLinks = document.getElementsByClassName( 'tab-links' );\n\tfor ( let i = 0; i < tabLinks.length; i++ ) {\n\t\ttabLinks[ i ].className = tabLinks[ i ].className.replace(\n\t\t\t' active',\n\t\t\t''\n\t\t);\n\t}\n\tdocument.getElementById( 'all-systems' ).className += ' active';\n\tallSystemsTable( dataContainer.systemList );\n\n\tdocument.getElementById( 'content-container' ).style.height = `${\n\t\tdocument.getElementById( 'svg-container' ).offsetHeight\n\t}px`;\n\n\tdocument.getElementById( 'run-button' ).style.display = 'block';\n\n\tdocument.getElementById( 'reset-button' ).style.display = 'block';\n\n\t//Hides Map Generator div\n\tdocument.getElementById( 'map-generator' ).style.display = 'none';\n\tdocument.getElementById( 'hex-container' ).sectorDataContainer =\n\t\tdataContainer;\n}\n\n//Resets map\n//Rewrite this\nexport function resetMap() {\n\t//fix CSS on generator section\n\tdocument.getElementById( 'map-generator' ).style.display = 'inline-flex';\n\tdocument.getElementById( 'run-button' ).style.display = 'none';\n\tdocument.getElementById( 'reset-button' ).style.display = 'none';\n\n\tif ( document.getElementById( 'system-information-content' ) !== null ) {\n\t\tlet systemContent = document.getElementById(\n\t\t\t'system-information-content'\n\t\t);\n\t\tlet oldSystem = systemContent.firstElementChild;\n\t\tlet allContent = document.getElementById( 'all-systems-content' );\n\t\tlet oldAll = allContent.firstElementChild;\n\n\t\tif ( oldSystem !== null ) systemContent.removeChild( oldSystem );\n\t\tif ( oldAll !== null ) allContent.removeChild( oldAll );\n\t}\n\n\tif ( document.querySelectorAll( '#hex-container' ).length > 0 ) {\n\t\tlet mapContainer = document.getElementById( 'svg-container' );\n\t\tlet map = document.getElementById( 'hex-container' );\n\t\tmapContainer.removeChild( map );\n\t}\n\n\tdocument.getElementById( 'tab-display' ).style.display = 'none';\n\n\tlet tabLinks = document.getElementsByClassName( 'tab-links' );\n\tfor ( let t = 0; t < tabLinks.length; t++ ) {\n\t\ttabLinks[ t ].style.display = 'none';\n\t}\n}\n","import { getSectorData } from './utilities';\n//Needs updating\n//https://www.geeksforgeeks.org/implementation-priority-queue-javascript/\nexport class PriorityQueue {\n\tconstructor() {\n\t\tthis.heap = [];\n\t}\n\n\t// Helper Methods\n\tgetLeftChildIndex( parentIndex ) {\n\t\treturn 2 * parentIndex + 1;\n\t}\n\n\tgetRightChildIndex( parentIndex ) {\n\t\treturn 2 * parentIndex + 2;\n\t}\n\n\tgetParentIndex( childIndex ) {\n\t\treturn Math.floor( ( childIndex - 1 ) / 2 );\n\t}\n\n\thasLeftChild( index ) {\n\t\treturn this.getLeftChildIndex( index ) < this.heap.length;\n\t}\n\n\thasRightChild( index ) {\n\t\treturn this.getRightChildIndex( index ) < this.heap.length;\n\t}\n\n\thasParent( index ) {\n\t\treturn this.getParentIndex( index ) >= 0;\n\t}\n\n\tleftChild( index ) {\n\t\treturn this.heap[ this.getLeftChildIndex( index ) ];\n\t}\n\n\trightChild( index ) {\n\t\treturn this.heap[ this.getRightChildIndex( index ) ];\n\t}\n\n\tparent( index ) {\n\t\treturn this.heap[ this.getParentIndex( index ) ];\n\t}\n\n\tswap( indexOne, indexTwo ) {\n\t\tconst temp = this.heap[ indexOne ];\n\t\tthis.heap[ indexOne ] = this.heap[ indexTwo ];\n\t\tthis.heap[ indexTwo ] = temp;\n\t}\n\n\tpeek() {\n\t\tif ( this.heap.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.heap[ 0 ];\n\t}\n\n\t// Removing an element will remove the\n\t// top element with highest priority then\n\t// heapifyDown will be called\n\tget() {\n\t\tif ( this.heap.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst item = this.heap[ 0 ];\n\t\tthis.heap[ 0 ] = this.heap[ this.heap.length - 1 ];\n\t\tthis.heap.pop();\n\t\tthis.heapifyDown();\n\t\treturn item;\n\t}\n\n\tput( item ) {\n\t\tthis.heap.push( item );\n\t\tthis.heapifyUp();\n\t}\n\n\theapifyUp() {\n\t\tlet index = this.heap.length - 1;\n\t\twhile (\n\t\t\tthis.hasParent( index ) &&\n\t\t\tthis.parent( index ) > this.heap[ index ]\n\t\t) {\n\t\t\tthis.swap( this.getParentIndex( index ), index );\n\t\t\tindex = this.getParentIndex( index );\n\t\t}\n\t}\n\n\theapifyDown() {\n\t\tlet index = 0;\n\t\twhile ( this.hasLeftChild( index ) ) {\n\t\t\tlet smallerChildIndex = this.getLeftChildIndex( index );\n\t\t\tif (\n\t\t\t\tthis.hasRightChild( index ) &&\n\t\t\t\tthis.rightChild( index ) < this.leftChild( index )\n\t\t\t) {\n\t\t\t\tsmallerChildIndex = this.getRightChildIndex( index );\n\t\t\t}\n\t\t\tif ( this.heap[ index ] < this.heap[ smallerChildIndex ] ) {\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tthis.swap( index, smallerChildIndex );\n\t\t\t}\n\t\t\tindex = smallerChildIndex;\n\t\t}\n\t}\n\tisEmpty() {\n\t\t// return true if the queue is empty.\n\t\tif ( this.heap.length == 0 ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nexport function uniformCostSearchSystems( start, range ) {\n\tconst frontier = new PriorityQueue();\n\tconst sectorData = getSectorData();\n\tconst graph = sectorData.SectorMap;\n\n\tconst reached = [];\n\tconst costSoFar = new Map(); //Location, float\n\n\tfrontier.put( start );\n\tcostSoFar.set( start, 0 );\n\n\twhile ( ! frontier.isEmpty() ) {\n\t\tlet currentKey = frontier.get();\n\t\tlet current = graph.get( currentKey );\n\t\tlet neighbours = current.edges;\n\n\t\tneighbours.forEach( ( hex ) => {\n\t\t\tlet costToHere = costSoFar.get( currentKey );\n\t\t\tlet newCost = costToHere + hex.cost;\n\n\t\t\tif (\n\t\t\t\t! costSoFar.has( hex.key ) &&\n\t\t\t\tnewCost <= hex.cost &&\n\t\t\t\tnewCost <= range\n\t\t\t) {\n\t\t\t\tcostSoFar.set( hex.key, newCost );\n\t\t\t\tfrontier.put( hex.key );\n\t\t\t\treached.push( hex.key );\n\t\t\t}\n\t\t} );\n\t}\n\t//Returns an array of [hex.key...].\n\treturn reached;\n}\nexport function uniformCostSearchPathfinder( start, goal, range ) {\n\tconst frontier = new PriorityQueue();\n\tconst sectorData = getSectorData();\n\tconst graph = sectorData.SectorMap;\n\n\tconst cameFrom = new Map(); // Location, optional location B <= A\n\tconst costSoFar = new Map(); //Location, float\n\n\tfrontier.put( start );\n\tcameFrom.set( start, null );\n\tcostSoFar.set( start, 0 );\n\n\twhile ( ! frontier.isEmpty() ) {\n\t\tlet currentKey = frontier.get();\n\t\tlet current = graph.get( currentKey );\n\t\tlet neighbours = current.edges;\n\n\t\tif ( currentKey == goal ) {\n\t\t\tbreak;\n\t\t}\n\n\t\tneighbours.forEach( ( hex ) => {\n\t\t\tlet costToHere = costSoFar.get( currentKey );\n\t\t\tlet newCost = costToHere + hex.cost;\n\n\t\t\tif (\n\t\t\t\t! costSoFar.has( hex.key ) &&\n\t\t\t\tnewCost <= hex.cost &&\n\t\t\t\tnewCost <= range\n\t\t\t) {\n\t\t\t\tcostSoFar.set( hex.key, newCost );\n\t\t\t\tfrontier.put( hex.key );\n\t\t\t\tcameFrom.set( hex.key, currentKey );\n\t\t\t}\n\t\t} );\n\t}\n\treturn cameFrom;\n}\nexport function reconstructPath( cameFrom, start, goal ) {\n\tlet current = goal;\n\tlet path = [];\n\n\tif ( ! cameFrom.get( goal ) ) {\n\t\treturn;\n\t}\n\twhile ( current != start ) {\n\t\tpath.push( current );\n\t\tcurrent = cameFrom.get( current );\n\t}\n\tpath.push( start );\n\tpath.reverse();\n\n\treturn path;\n}\n","import { getSectorData, getSystem } from './utilities';\n\nexport function runTradeSimulation() {\n\tconst sector = getSectorData();\n\tconst activeHexes = [];\n\tsector.SectorMap.forEach( checkActiveHex, activeHexes );\n\tlet maxValue = 0;\n\tconsole.log( 'Beep' );\n\n\tactiveHexes.forEach( ( hexKey ) => {\n\t\torigin = sector.SectorMap.get( hexKey );\n\t\tlet range = origin.system.economicData.tradeRange;\n\t\tlet tradePartners = origin.system.economicData.findTradePartners(\n\t\t\thexKey,\n\t\t\trange\n\t\t);\n\t\tif ( tradePartners.length > 0 ) {\n\t\t\torigin.system.economicData.setTradeRoutes( hexKey, tradePartners );\n\t\t}\n\t} );\n\tactiveHexes.forEach( ( hexKey ) => {\n\t\torigin = sector.SectorMap.get( hexKey );\n\t\torigin.system.economicData.tradeRoutes.forEach( ( route ) => {\n\t\t\tif ( route.tradeRouteVolume > maxValue ) {\n\t\t\t\tmaxValue = route.tradeRouteVolume;\n\t\t\t}\n\t\t} );\n\t} );\n\tactiveHexes.forEach( ( hexKey ) => {\n\t\torigin = sector.SectorMap.get( hexKey );\n\t\torigin.system.economicData.tradeRoutes.forEach( ( route ) => {\n\t\t\t//Issue in route.routeHexesArray\n\t\t\tif ( route.routeHexesArray.length > 0 ) {\n\t\t\t\troute.drawConnectingLine( maxValue, route.routeHexesArray );\n\t\t\t}\n\t\t} );\n\t} );\n\tactiveHexes.forEach( ( hexKey ) => {\n\t\tmakeTrades( hexKey );\n\t} );\n}\n\nexport function checkActiveHex( value, key ) {\n\tif ( value.system ) {\n\t\tthis.push( key );\n\t}\n}\n\nexport function makeTrades( originKey ) {\n\tconst originHex = getSystem( originKey );\n\tconst originSupply = originHex.system.economicData.tradeInfo.supply;\n\tconst originDemands = originHex.system.economicData.tradeInfo.demands;\n\n\tconst tradeRoutes = originHex.system.economicData.tradeRoutes;\n\n\tconst availableSalePrices = []; //Format, (hexKey, price)\n\tconst availablePurchasePrices = [];\n\n\tconst highestSalePrice = new Map();\n\tconst lowestPurchasePrice = new Map();\n\n\toriginSupply.forEach( ( good ) => {\n\t\ttradeRoutes.forEach( ( route ) => {\n\t\t\tlet endKey = route.endKey;\n\t\t\tlet endHex = getSystem( endKey );\n\t\t\tlet endDemands = endHex.system.economicData.tradeInfo.demands;\n\t\t\tendDemands.forEach( ( demand ) => {\n\t\t\t\tif ( demand.id == good.id ) {\n\t\t\t\t\tavailableSalePrices.push( [ endKey, demand ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}, good );\n\t\tlet highestPriceEntry = Math.max( ...availableSalePrices[ 1 ].price );\n\t\tlet demandHex = availableSalePrices.findIndex(\n\t\t\t( price ) => price[ 1 ] == highestPriceEntry.price\n\t\t);\n\t\tlet sellAmount = route.setAmount(\n\t\t\tgood,\n\t\t\thighestPriceEntry.price,\n\t\t\t'sell'\n\t\t);\n\t\thighestSalePrice.set( demandHex, {\n\t\t\tgood: good.id,\n\t\t\tprice: highestPriceEntry.price,\n\t\t\tamountSold: sellAmount,\n\t\t} );\n\t\tavailableSalePrices = [];\n\t} );\n\toriginDemands.forEach( ( good ) => {\n\t\ttradeRoutes.forEach( ( route ) => {\n\t\t\tlet endKey = route.endKey;\n\t\t\tlet endHex = getSectorData( endKey );\n\t\t\tlet endSupply = endHex.system.economicData.tradeInfo.supply;\n\t\t\tendSupply.forEach( ( supply ) => {\n\t\t\t\tif ( supply.id == good.id ) {\n\t\t\t\t\tavailablePurchasePrices.push( [ endKey, supply ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}, good );\n\t\tlet lowestPriceEntry = Math.min(\n\t\t\t...availablePurchasePrices[ 1 ].price\n\t\t);\n\t\tlet supplyHex = availablePurchasePrices.findIndex(\n\t\t\t( price ) => price[ 1 ] == lowestPriceEntry.price\n\t\t);\n\t\tlet buyAmount = route.setAmount( good, lowestPriceEntry.price, 'buy' );\n\t\tlowestPurchasePrice.set( supplyHex, {\n\t\t\tgood: good.id,\n\t\t\tprice: lowestPriceEntry.price,\n\t\t\tamountBought: buyAmount,\n\t\t} );\n\t\tavailablePurchasePrices = [];\n\t} );\n}\n","import { Economy } from './economy.js';\nimport { TRADECODES } from './economyConstants.js';\nimport { SYSTEM, TRADECODEREQS } from './systemConstants.js';\nimport { rollDice } from './utilities.js';\n\nexport class System {\n\tconstructor( hexKey, id, centerPoint ) {\n\t\tthis.id = id;\n\t\tthis.centerPoint = centerPoint;\n\t\tthis.systemRolls = this.setSystemRolls();\n\t\tthis.systemData = this.setSystemData( this.systemRolls );\n\t\tthis.uwp = this.setUWP( this.systemRolls );\n\t\tthis.economicData = new Economy(\n\t\t\thexKey,\n\t\t\tthis.systemRolls.get( 'tl' ),\n\t\t\tthis.systemRolls.get( 'government' ),\n\t\t\tthis.systemRolls.get( 'population' ),\n\t\t\tthis.systemData.tradeCodes\n\t\t);\n\t\tthis.tableData = this.setTableData();\n\t}\n\tsetSystemRolls() {\n\t\tlet systemRolls = new Map( [] );\n\t\t//Planet Size:\n\t\tlet planetSize = rollDice( 2 ) - 2;\n\t\tsystemRolls.set( 'planetSize', planetSize );\n\n\t\t//Atmo Type:\n\t\tlet atmoType = rollDice( 2 ) - 7 + systemRolls.get( 'planetSize' );\n\t\tif ( atmoType < 0 ) {\n\t\t\tatmoType = 0;\n\t\t}\n\t\tsystemRolls.set( 'atmoType', atmoType );\n\n\t\t//Hydro Perc:\n\t\tlet hydroMod = 0;\n\t\tlet atmo = systemRolls.get( 'atmoType' );\n\t\tif (\n\t\t\tatmo === 0 ||\n\t\t\tatmo === 1 ||\n\t\t\tatmo === 10 ||\n\t\t\tatmo === 11 ||\n\t\t\tatmo === 12\n\t\t) {\n\t\t\thydroMod = -4;\n\t\t}\n\t\tlet hydroResult =\n\t\t\trollDice( 2 ) - 7 + systemRolls.get( 'planetSize' ) + hydroMod;\n\t\thydroResult < 0\n\t\t\t? systemRolls.set( 'hydroType', 0 )\n\t\t\t: systemRolls.set( 'hydroType', hydroResult );\n\n\t\t//Pop:\n\t\tlet popRoll = rollDice( 2 ) - 2;\n\t\tsystemRolls.set( 'population', popRoll );\n\n\t\t//Gov Type:\n\t\tlet govRoll = rollDice( 2 ) - 7 + systemRolls.get( 'population' );\n\t\tlet govType = govRoll;\n\t\tif ( govRoll > 13 ) {\n\t\t\tgovType = 13;\n\t\t}\n\t\tif ( govRoll < 0 ) {\n\t\t\tgovType = 0;\n\t\t}\n\t\tsystemRolls.set( 'government', govType );\n\n\t\t//Law Level:\n\t\tlet lawRoll = rollDice( 2 ) - 7 + govType;\n\t\tif ( lawRoll < 0 ) {\n\t\t\tgovRoll = 0;\n\t\t\tlawRoll = 0;\n\t\t}\n\n\t\tsystemRolls.set( 'lawLevel', lawRoll );\n\n\t\t//Starport:\n\t\tlet starport = rollDice( 2 );\n\t\tsystemRolls.set( 'starport', starport );\n\n\t\t//TL:\n\t\tlet starportDM;\n\t\tif ( starport >= 11 ) {\n\t\t\tstarportDM = 6;\n\t\t} else if ( starport > 8 && starport < 11 ) {\n\t\t\tstarportDM = 4;\n\t\t} else if ( starport > 6 && starport < 8 ) {\n\t\t\tstarportDM = 2;\n\t\t} else if ( starport > 2 && starport < 7 ) {\n\t\t\tstarportDM = 0;\n\t\t} else starportDM = -4;\n\n\t\tlet sizeDM = 0;\n\t\tif ( planetSize > 1 && planetSize < 5 ) {\n\t\t\tsizeDM = 1;\n\t\t} else if ( planetSize < 2 ) {\n\t\t\tsizeDM = 2;\n\t\t} else sizeDM = 0;\n\n\t\t//TEMP\n\t\tlet atmoDM = 0;\n\t\tif ( atmoType < 4 || atmoType > 9 ) {\n\t\t\tatmoDM = 1;\n\t\t}\n\n\t\tlet hydroDM = 0;\n\t\tif ( hydroResult === 0 || hydroResult === 9 ) {\n\t\t\thydroDM = 1;\n\t\t} else if ( hydroResult === 10 ) {\n\t\t\thydroDM = 2;\n\t\t}\n\n\t\tlet popDM = 0;\n\t\tif ( ( popRoll > 0 && popRoll < 6 ) || popRoll === 9 ) {\n\t\t\tpopDM = 1;\n\t\t} else if ( popRoll === 10 ) {\n\t\t\tpopDM = 2;\n\t\t} else if ( popRoll === 11 ) {\n\t\t\tpopDM = 3;\n\t\t} else if ( popRoll === 12 ) {\n\t\t\tpopDM = 4;\n\t\t}\n\n\t\tlet govDM = 0;\n\t\tif ( govType === 0 || govType === 5 ) {\n\t\t\tgovDM = 1;\n\t\t} else if ( govType === 7 ) {\n\t\t\tgovDM = 2;\n\t\t} else if ( govType === 13 || govType === 14 ) {\n\t\t\tgovDM = -2;\n\t\t}\n\n\t\tlet TL =\n\t\t\trollDice( 1 ) +\n\t\t\tstarportDM +\n\t\t\tsizeDM +\n\t\t\tatmoDM +\n\t\t\thydroDM +\n\t\t\tpopDM +\n\t\t\tgovDM;\n\t\tif ( TL < 0 ) {\n\t\t\tTL = 0;\n\t\t}\n\t\tsystemRolls.set( 'tl', TL );\n\n\t\treturn systemRolls;\n\t}\n\tsetSystemData( systemRolls ) {\n\t\treturn {\n\t\t\tsystemName: this.generateName(),\n\t\t\tsize: this.setSize( systemRolls.get( 'planetSize' ) ),\n\t\t\tatmosphere: this.setAtmosphere( systemRolls.get( 'atmoType' ) ),\n\t\t\thydrographics: this.setHydrographics(\n\t\t\t\tsystemRolls.get( 'hydroType' ),\n\t\t\t\tsystemRolls.get( 'planetSize' )\n\t\t\t),\n\t\t\tpopulation: this.setPopulation( systemRolls.get( 'population' ) ),\n\t\t\tgovernment: this.setGovernment( systemRolls.get( 'government' ) ),\n\t\t\tlawLevel: this.setLaw( systemRolls.get( 'lawLevel' ) ),\n\t\t\ttechLevel: this.setTL( systemRolls.get( 'tl' ) ),\n\t\t\tstarport: this.setStarport( systemRolls.get( 'starport' ) ),\n\t\t\ttradeCodes: this.setTradeCodes( systemRolls, TRADECODEREQS ),\n\t\t};\n\t}\n\n\t//Returns formatted system data for table - redundant?\n\tsetTableData() {\n\t\tlet formattedPop =\n\t\t\tthis.systemData.population.totalPopulation.toLocaleString();\n\t\tlet tradeCodeLongArray = [];\n\t\tlet formattedTradeCodes;\n\t\tlet formatedHydroPercent = `${ this.systemData.hydrographics.hydroPercent }%`;\n\n\t\tthis.systemData.tradeCodes.forEach( ( code ) => {\n\t\t\ttradeCodeLongArray.push( TRADECODES[ code ].codeName );\n\t\t} );\n\n\t\tformattedTradeCodes = tradeCodeLongArray.join( ', ' );\n\n\t\treturn {\n\t\t\tUWP: `${ this.uwp }`,\n\t\t\tName: this.systemData.systemName,\n\t\t\tSize: `${ this.systemData.size.size } km`,\n\t\t\tGravity: `${ this.systemData.size.gravity } Earth Normal`,\n\t\t\tAtmosphere: `${ this.systemData.atmosphere.atmo } at ${ this.systemData.atmosphere.psi } psi.`,\n\t\t\tHydropgraphics: formatedHydroPercent,\n\t\t\tPopulation: formattedPop,\n\t\t\tGovernment: this.systemData.government.governmentType,\n\t\t\t'Law Level': this.systemData.lawLevel.lawLevel,\n\t\t\t'Starport Grade': this.systemData.starport,\n\t\t\t'Tech Level': this.systemData.techLevel.tl,\n\t\t\t'Trade Code': formattedTradeCodes,\n\t\t};\n\t}\n\t//  Name\n\tgenerateName() {\n\t\t//Code from internet to make a random string of letters.\n\t\tlet randString = ( length = 6 ) => {\n\t\t\treturn Math.random().toString( 20 ).substr( 2, length );\n\t\t};\n\t\tlet systemName = randString( 6 );\n\t\treturn systemName;\n\t}\n\t//  Size\n\tsetSize( sizeRoll ) {\n\t\tlet sizeIndex = sizeRoll;\n\t\treturn {\n\t\t\tsize: SYSTEM.SIZE[ sizeIndex ],\n\t\t\tgravity: SYSTEM.GRAVITY[ sizeIndex ],\n\t\t};\n\t}\n\t//  Atmosphere\n\tsetAtmosphere( atmoRoll ) {\n\t\tconst psiCalc = ( min, max ) => {\n\t\t\treturn (\n\t\t\t\tMath.floor(\n\t\t\t\t\tMath.random() * ( max * 1000 - min * 1000 + 1 + min * 1000 )\n\t\t\t\t) / 1000\n\t\t\t);\n\t\t};\n\t\tlet atmoIndex = atmoRoll;\n\t\tlet psi = psiCalc(\n\t\t\tSYSTEM.PSIMIN[ atmoIndex ],\n\t\t\tSYSTEM.PSIMAX[ atmoIndex ]\n\t\t);\n\t\treturn { atmo: SYSTEM.ATMO[ atmoIndex ], psi: psi };\n\t}\n\t//  Hydrographics\n\tsetHydrographics( hydro, size ) {\n\t\t//For dumb reasons, despite producing values over 10, hydro is maxed at 10;\n\t\tlet hydroIndex = hydro;\n\t\thydro > 10 ? ( hydro = 10 ) : hydro;\n\t\tconst hydroCalc = ( min, max ) => {\n\t\t\treturn (\n\t\t\t\tMath.floor(\n\t\t\t\t\t100 * ( Math.random() * ( max - min + 1 + min ) )\n\t\t\t\t) / 100\n\t\t\t);\n\t\t};\n\t\tlet hydroPercent = hydroCalc(\n\t\t\tSYSTEM.HYDROMIN[ hydroIndex ],\n\t\t\tSYSTEM.HYDROMAX[ hydroIndex ]\n\t\t);\n\t\tlet hydroDesc = hydro;\n\t\tif ( size <= 1 ) {\n\t\t\thydroPercent = 0;\n\t\t\thydroDesc = 11;\n\t\t}\n\t\treturn {\n\t\t\thydroPercent: hydroPercent,\n\t\t\thydroDesc: SYSTEM.HYDRO[ hydroIndex ],\n\t\t};\n\t}\n\t//  Population\n\tsetPopulation( pop ) {\n\t\t//Numbers are a bit fudged, but who cares.\n\t\tlet popRoll = pop;\n\t\tlet totalPop =\n\t\t\tMath.pow( 10, popRoll ) +\n\t\t\tMath.floor( Math.random() * Math.pow( 10, popRoll ) ) -\n\t\t\t1;\n\t\treturn { totalPopulation: totalPop };\n\t}\n\t//  Government\n\tsetGovernment( govRoll ) {\n\t\tlet govIndex = govRoll;\n\t\treturn { governmentType: SYSTEM.GOV[ govIndex ] };\n\t}\n\t//  Laws\n\tsetLaw( lawRoll ) {\n\t\tlet law = lawRoll;\n\t\tif ( law > 9 ) {\n\t\t\tlaw = 9;\n\t\t}\n\t\tif ( law < 0 ) {\n\t\t\tlaw = 0;\n\t\t}\n\t\treturn { lawLevel: law };\n\t}\n\t//  Starports\n\tsetStarport( stClass ) {\n\t\tlet starport;\n\t\tif ( stClass > 10 ) {\n\t\t\tstarport = 'A';\n\t\t} else if ( stClass === 10 || stClass === 9 ) {\n\t\t\tstarport = 'B';\n\t\t} else if ( stClass === 8 || stClass === 7 ) {\n\t\t\tstarport = 'C';\n\t\t} else if ( stClass === 6 || stClass === 5 ) {\n\t\t\tstarport = 'D';\n\t\t} else if ( stClass === 4 || stClass === 3 ) {\n\t\t\tstarport = 'E';\n\t\t} else starport = 'X';\n\t\treturn starport;\n\t}\n\t//  Tech Level\n\tsetTL( techRoll ) {\n\t\treturn { tl: techRoll };\n\t}\n\t// Trade Codes\n\tsetTradeCodes( rolls, reqArray ) {\n\t\tlet tradeCodesArray = [];\n\n\t\tlet size = rolls.get( 'planetSize' );\n\t\tlet atmo = rolls.get( 'atmoType' );\n\t\tlet hydro = rolls.get( 'hydroType' );\n\t\tlet pop = rolls.get( 'population' );\n\t\tlet gov = rolls.get( 'government' );\n\t\tlet law = rolls.get( 'lawLevel' );\n\n\t\treqArray.forEach( ( req ) => {\n\t\t\tlet checkArray = [];\n\t\t\tif ( req.siz.length === 0 || req.siz.includes( size ) ) {\n\t\t\t\tcheckArray.push( true );\n\t\t\t} else {\n\t\t\t\tcheckArray.push( false );\n\t\t\t}\n\t\t\tif ( req.atm.length === 0 || req.atm.includes( atmo ) ) {\n\t\t\t\tcheckArray.push( true );\n\t\t\t} else {\n\t\t\t\tcheckArray.push( false );\n\t\t\t}\n\t\t\tif ( req.hyd.length === 0 || req.hyd.includes( hydro ) ) {\n\t\t\t\tcheckArray.push( true );\n\t\t\t} else {\n\t\t\t\tcheckArray.push( false );\n\t\t\t}\n\t\t\tif ( req.pop.length === 0 || req.pop.includes( pop ) ) {\n\t\t\t\tcheckArray.push( true );\n\t\t\t} else {\n\t\t\t\tcheckArray.push( false );\n\t\t\t}\n\t\t\tif ( req.gov.length === 0 || req.gov.includes( gov ) ) {\n\t\t\t\tcheckArray.push( true );\n\t\t\t} else {\n\t\t\t\tcheckArray.push( false );\n\t\t\t}\n\t\t\tif ( req.law.length === 0 || req.law.includes( law ) ) {\n\t\t\t\tcheckArray.push( true );\n\t\t\t} else {\n\t\t\t\tcheckArray.push( false );\n\t\t\t}\n\n\t\t\tif ( checkArray.includes( false ) ) {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\ttradeCodesArray.push( req.code );\n\t\t\t}\n\t\t} );\n\n\t\treturn tradeCodesArray;\n\t}\n\t//  Creates Universal World Profile\n\tsetUWP( rolls ) {\n\t\tlet uwp =\n\t\t\t`${ this.systemData.starport }-` +\n\t\t\t`${ this.numToHex( rolls.get( 'planetSize' ) ) }` +\n\t\t\t`${ this.numToHex( rolls.get( 'atmoType' ) ) }` +\n\t\t\t`${ this.numToHex( rolls.get( 'hydroType' ) ) }` +\n\t\t\t`${ this.numToHex( rolls.get( 'population' ) ) }` +\n\t\t\t`${ this.numToHex( rolls.get( 'government' ) ) }` +\n\t\t\t`${ this.numToHex( rolls.get( 'lawLevel' ) ) }` +\n\t\t\t`${ this.numToHex( rolls.get( 'tl' ) ) }`;\n\t\treturn uwp;\n\t}\n\tnumToHex( num ) {\n\t\tlet code = num.toString( 16 );\n\t\tcode = code.toUpperCase();\n\t\treturn code;\n\t}\n}\n","export const SYSTEM = {\n\tSIZE: [\n\t\t800, 1600, 3200, 4800, 6400, 8000, 9600, 11200, 12800, 14400, 16000,\n\t],\n\tGRAVITY: [\n\t\t'Negligible',\n\t\t0.05,\n\t\t0.15,\n\t\t0.25,\n\t\t0.35,\n\t\t0.45,\n\t\t0.7,\n\t\t0.9,\n\t\t1.0,\n\t\t1.25,\n\t\t1.4,\n\t],\n\tATMO: [\n\t\t'None',\n\t\t'Trace',\n\t\t'Very Thin, Tainted',\n\t\t'Very Thin',\n\t\t'Thin, Tainted',\n\t\t'Thin',\n\t\t'Standard',\n\t\t'Standard, Tainted',\n\t\t'Dense',\n\t\t'Dense, Tainted',\n\t\t'Exotic',\n\t\t'Corrosive',\n\t\t'Insidious',\n\t\t'Dense, High',\n\t\t'Thin, Low',\n\t\t'Unusual',\n\t],\n\tPSIMIN: [\n\t\t0, 0.001, 0.1, 0.1, 0.43, 0.43, 0.71, 0.71, 1.5, 1.5, 0.43, 0.43, 0.43,\n\t\t1.5, 0.1, 0,\n\t],\n\tPSIMAX: [\n\t\t0, 0.09, 0.42, 0.42, 0.7, 0.7, 1.49, 1.49, 2.49, 2.49, 2.49, 2.49, 2.49,\n\t\t5, 0.5, 5,\n\t],\n\tHYDROMIN: [ 0, 6, 16, 26, 36, 46, 56, 66, 76, 86, 96 ],\n\tHYDROMAX: [ 5, 15, 25, 35, 45, 55, 65, 75, 85, 95, 100 ],\n\tHYDRO: [\n\t\t'Desert World',\n\t\t'Dry World',\n\t\t'A few small seas',\n\t\t'Small seas and oceans',\n\t\t'Wet World',\n\t\t'Large oceans',\n\t\t'',\n\t\t'Terran Standard',\n\t\t'Water world',\n\t\t'Only a few small islands and archipelagos',\n\t\t'Almost entirely water',\n\t\t'None',\n\t],\n\tGOV: [\n\t\t'None',\n\t\t'Company/Corporation',\n\t\t'Participating Democracy',\n\t\t'Self-Perpetuating Oligarchy',\n\t\t'Representative Democracy',\n\t\t'Feudal Technocracy',\n\t\t'Captive Government',\n\t\t'Balkanisation',\n\t\t'Civil Service Bureaucracy',\n\t\t'Impersonal Bureaucracy',\n\t\t'Charismatic Dictator',\n\t\t'Non-Charistmatic Dictator',\n\t\t'Charismatic Oligarchy',\n\t\t'Religious Dictatorship',\n\t],\n};\n\nexport const TRADECODEREQS = [\n\t{\n\t\tcode: 'As',\n\t\tsiz: [ 0 ],\n\t\tatm: [ 0 ],\n\t\thyd: [ 0 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'De',\n\t\tsiz: [],\n\t\tatm: [ 2, 3, 4, 5, 6, 7, 8, 9 ],\n\t\thyd: [ 0 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Fl',\n\t\tsiz: [],\n\t\tatm: [ 10, 11, 12 ],\n\t\thyd: [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Ga',\n\t\tsiz: [ 6, 7, 8 ],\n\t\tatm: [ 5, 6, 8 ],\n\t\thyd: [ 5, 6, 7 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t//Hellworld seems disconnected from other tags, remove?\n\t{\n\t\tcode: 'He',\n\t\tsiz: [ 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 ],\n\t\tatm: [ 2, 3, 7, 8, 10, 11, 12 ],\n\t\thyd: [ 0, 1, 2 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Ic',\n\t\tsiz: [],\n\t\tatm: [ 0, 1 ],\n\t\thyd: [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Oc',\n\t\tsiz: [ 10, 11, 12 ],\n\t\tatm: [ 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 ],\n\t\thyd: [ 10 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{ code: 'Va', siz: [], atm: [ 0 ], hyd: [], pop: [], gov: [], law: [] },\n\t{\n\t\tcode: 'Wa',\n\t\tsiz: [ 3, 4, 5, 6, 7, 8, 9, 10 ],\n\t\tatm: [ 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 ],\n\t\thyd: [ 10 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\n\t{ code: 'Ba', siz: [], atm: [], hyd: [], pop: [ 0 ], gov: [], law: [] },\n\t{\n\t\tcode: 'Lo',\n\t\tsiz: [],\n\t\tatm: [],\n\t\thyd: [],\n\t\tpop: [ 1, 2, 3 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Ni',\n\t\tsiz: [],\n\t\tatm: [],\n\t\thyd: [],\n\t\tpop: [ 4, 5, 6 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{ code: 'Ph', siz: [], atm: [], hyd: [], pop: [ 7, 8 ], gov: [], law: [] },\n\t{\n\t\tcode: 'Hi',\n\t\tsiz: [],\n\t\tatm: [],\n\t\thyd: [],\n\t\tpop: [ 9, 10, 11, 12, 13, 14, 15 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\n\t{\n\t\tcode: 'Pa',\n\t\tsiz: [],\n\t\tatm: [ 4, 5, 6, 7, 8, 9 ],\n\t\thyd: [ 4, 5, 6, 7, 8 ],\n\t\tpop: [ 4, 8 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Ag',\n\t\tsiz: [],\n\t\tatm: [ 4, 5, 6, 7, 8, 9 ],\n\t\thyd: [ 4, 5, 6, 7, 8 ],\n\t\tpop: [ 5, 6, 7 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Na',\n\t\tsiz: [],\n\t\tatm: [ 0, 1, 2, 3 ],\n\t\thyd: [],\n\t\tpop: [ 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Pi',\n\t\tsiz: [],\n\t\tatm: [ 0, 1, 2, 4, 7, 9 ],\n\t\thyd: [],\n\t\tpop: [ 7, 8 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'In',\n\t\tsiz: [],\n\t\tatm: [ 0, 1, 2, 3, 7, 9, 10, 11, 12 ],\n\t\thyd: [],\n\t\tpop: [ 9, 10, 11, 12, 13, 14, 15 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Po',\n\t\tsiz: [],\n\t\tatm: [ 2, 3, 4, 5 ],\n\t\thyd: [ 0, 1, 2, 3 ],\n\t\tpop: [],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Pr',\n\t\tsiz: [],\n\t\tatm: [ 6, 8 ],\n\t\thyd: [],\n\t\tpop: [ 5, 9 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n\t{\n\t\tcode: 'Ri',\n\t\tsiz: [],\n\t\tatm: [ 6, 8 ],\n\t\thyd: [],\n\t\tpop: [ 6, 7, 8 ],\n\t\tgov: [],\n\t\tlaw: [],\n\t},\n];\n","import { getSectorData, getSystem } from './utilities.js';\nimport { uniformCostSearchPathfinder, reconstructPath } from './pathfinding.js';\n\nexport class TradeRoute {\n\tconstructor( start, end, maxRange ) {\n\t\tthis.startKey = start;\n\t\tthis.endKey = end;\n\t\tthis.routeKey = `${ start }=>${ end }`;\n\t\tthis.routeHexesArray = this.findRoute( start, end, maxRange );\n\n\t\tthis.startSystem = getSystem( start );\n\t\tthis.endSystem = getSystem( end );\n\n\t\tthis.startTradeInfo = this.startSystem.system.economicData.tradeInfo;\n\t\tthis.endTradeInfo = this.endSystem.system.economicData.tradeInfo;\n\n\t\tthis.routeTradeCapacity = this.setHighestTradeCapacity(\n\t\t\tthis.startSystem.system.economicData.tradeCapacity,\n\t\t\tthis.endSystem.system.economicData.tradeCapacity\n\t\t);\n\t\t//Need to fix tradeRouteVolume to fix line width.\n\t\tthis.tradeRouteVolume = 0;\n\t\tthis.tradeRouteProfit = 0;\n\t\tthis.tradeRouteDetails = [];\n\t}\n\t//Red Blob Games to the rescue\n\tfindRoute( start, end, range ) {\n\t\tlet pathFinder = uniformCostSearchPathfinder( start, end, range );\n\t\tlet route = reconstructPath( pathFinder, start, end );\n\n\t\treturn route;\n\t}\n\n\tsetHighestTradeCapacity( startCapacity, endCapacity ) {\n\t\tif ( startCapacity >= endCapacity ) {\n\t\t\treturn startCapacity;\n\t\t} else return endCapacity;\n\t}\n\n\texchangeGoods() {\n\t\tthis.startTradeData.sellingIdArray.forEach( ( id ) => {\n\t\t\tlet sellGood = this.startTradeInfo.supply.find(\n\t\t\t\t( good ) => good.id == id\n\t\t\t);\n\t\t\tlet buyGood = this.endTradeInfo.demand.find(\n\t\t\t\t( good ) => good.id == id\n\t\t\t);\n\t\t\tlet type = `sell`;\n\t\t\tif ( sellGood != undefined && buyGood != undefined ) {\n\t\t\t\tthis.calculateSale( id, sellGood, buyGood, type );\n\t\t\t}\n\t\t} );\n\t\tthis.startTradeData.buyingIdArray.forEach( ( id ) => {\n\t\t\tlet buyGood = this.startTradeInfo.demand.find(\n\t\t\t\t( good ) => good.id == id\n\t\t\t);\n\t\t\tlet sellGood = this.endTradeInfo.supply.find(\n\t\t\t\t( good ) => good.id == id\n\t\t\t);\n\t\t\tlet type = `buy`;\n\t\t\tif ( sellGood && buyGood ) {\n\t\t\t\tthis.calculateSale( id, sellGood, buyGood, type );\n\t\t\t}\n\t\t} );\n\t}\n\n\tcalculateSale( id, sellGood, buyGood, type ) {\n\t\t//This is where dynamic pricing would go - IF I HAD ANY\n\t\tlet maxSellOffer = sellGood.supplyAmount;\n\t\tlet maxBuyOffer = buyGood.demandAmount;\n\t\tlet tradeCapacity = this.routeTradeCapacity;\n\n\t\tlet exchangeArray = [ maxSellOffer, maxBuyOffer, tradeCapacity ];\n\t\tlet offerAmount = Math.min( ...exchangeArray );\n\n\t\tlet sellPrice = buyGood.price;\n\t\tlet profit = buyGood.price - sellGood.price;\n\n\t\t//THIS IS WHERE YOU CAN ABORT THE SALE\n\t\t//TEMP VALUE\n\t\tlet sale = true;\n\n\t\tif ( ( sale = true ) ) {\n\t\t\tmaxSellOffer -= offerAmount;\n\t\t\tmaxBuyOffer -= offerAmount;\n\n\t\t\tthis.tradeRouteVolume += offerAmount;\n\t\t\tthis.tradeRouteProfit += profit;\n\t\t\tthis.tradeRouteDetails.push( {\n\t\t\t\texchangeType: type,\n\t\t\t\tgoodId: id,\n\t\t\t\tofferAmount: offerAmount,\n\t\t\t\tsellPrice: sellPrice,\n\t\t\t\tprofit: profit,\n\t\t\t} );\n\t\t}\n\t}\n\tdrawConnectingLine( maxValue, pathArray ) {\n\t\tconst width = this.calculateTradeRouteWidth(\n\t\t\tthis.tradeRouteVolume,\n\t\t\tmaxValue\n\t\t);\n\t\tconst routeKey = this.routeKey;\n\t\tconst tradeGroup = document.getElementById( 'trade-group' );\n\t\tconst sectorData = getSectorData();\n\n\t\tif ( pathArray.length == 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet newPath = document.createElementNS(\n\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t'path'\n\t\t);\n\t\tlet pathStart = sectorData.SectorMap.get( pathArray[ 0 ] );\n\t\tlet pathString = `M${ pathStart.centerPoint.x } ${ pathStart.centerPoint.y } `;\n\t\tfor ( let i = 1; i < pathArray.length; i++ ) {\n\t\t\tlet step = sectorData.SectorMap.get( pathArray[ i ] );\n\t\t\tlet stepCoords = step.centerPoint;\n\n\t\t\tlet x = stepCoords.x;\n\t\t\tlet y = stepCoords.y;\n\t\t\tpathString += `L${ x } ${ y } `;\n\t\t}\n\n\t\tnewPath.setAttribute( 'd', pathString );\n\t\tnewPath.setAttribute( 'class', 'tradeLine' );\n\t\tnewPath.setAttribute( 'id', routeKey );\n\t\tnewPath.setAttribute(\n\t\t\t'style',\n\t\t\t`fill:none; stroke:red; stroke-width: ${ width }`\n\t\t);\n\n\t\tnewPath.addEventListener( 'click', this.tradeRouteOnClick );\n\n\t\ttradeGroup.appendChild( newPath );\n\t}\n\tcalculateTradeRouteWidth( routeValue, maxValue ) {\n\t\tlet maxWidth = 20;\n\t\tlet width;\n\t\t//Oh god, basic maths\n\t\tlet min = maxValue / 100;\n\t\tlet widthPercent = routeValue / ( min * 100 );\n\t\twidth = Math.tanh( widthPercent ) * 20;\n\t\tif ( width < 4 ) {\n\t\t\twidth = 4;\n\t\t}\n\n\t\treturn width;\n\t}\n\ttradeRouteOnClick() {\n\t\tconst SectorTradeRoutes =\n\t\t\tdocument.getElementById( 'hex-container' ).sectorDataContainer\n\t\t\t\t.SectorMap;\n\t\tconsole.log( this.id );\n\t\tlet clickedRoute = SectorTradeRoutes.get( this.id );\n\t\tconsole.log( clickedRoute );\n\t}\n\tsetAmount( originGood, partnerGood, type ) {\n\t\tthis.startTradeInfo = this.startSystem.system.economicData.tradeInfo;\n\t\tthis.endTradeInfo = this.endSystem.system.economicData.tradeInfo;\n\t\tlet max = this.routeTradeCapacity;\n\t\tlet amountArray = [];\n\n\t\tif ( type == 'sell' ) {\n\t\t\t//supply -> demand\n\t\t\tamountArray = [\n\t\t\t\toriginGood.supplyAmount,\n\t\t\t\tpartnerGood.demandAmount,\n\t\t\t\tmax,\n\t\t\t];\n\t\t}\n\n\t\tif ( type == 'buy' ) {\n\t\t\t//demand -> supply\n\t\t\tamountArray = [\n\t\t\t\toriginGood.demandAmount,\n\t\t\t\tpartnerGood.supplyAmount,\n\t\t\t\tmax,\n\t\t\t];\n\t\t}\n\t\tlet lowest = Math.min( ...amountArray );\n\t\treturn lowest;\n\t}\n}\n","import { TRADEGOODS } from './economyConstants.js';\n\nexport const DOMIdToHexKeyMap = new Map();\nexport const HexKeyToDOMIdMap = new Map();\n\nexport const direction_differences = [\n\t// even cols\n\t[\n\t\t[ +1, 0 ],\n\t\t[ +1, -1 ],\n\t\t[ 0, -1 ],\n\t\t[ -1, -1 ],\n\t\t[ -1, 0 ],\n\t\t[ 0, +1 ],\n\t],\n\t// odd cols\n\t[\n\t\t[ +1, +1 ],\n\t\t[ +1, 0 ],\n\t\t[ 0, -1 ],\n\t\t[ -1, 0 ],\n\t\t[ -1, +1 ],\n\t\t[ 0, +1 ],\n\t],\n];\n\nexport function getSectorData() {\n\tconst sectorData =\n\t\tdocument.getElementById( 'hex-container' ).sectorDataContainer;\n\treturn sectorData;\n}\n\nexport function getSystem( hexKey ) {\n\tconst sectorData = getSectorData();\n\tlet system = sectorData.SectorMap.get( hexKey );\n\treturn system;\n}\n\nexport function rollDice( numDice ) {\n\tlet total = 0;\n\tfor ( let i = 0; i < numDice; i++ ) {\n\t\ttotal += Math.floor( Math.random() * 6 + 1 );\n\t}\n\treturn total;\n}\n//Tab Control Code\n//Currently only works for System Information\nexport function openTab( event ) {\n\t// Declare all variables\n\tlet i, tabContent, tabLinks;\n\t// Get all elements with class=\"\" and hide them\n\ttabContent = document.getElementsByClassName( 'tab-content' );\n\tfor ( i = 0; i < tabContent.length; i++ ) {\n\t\ttabContent[ i ].style.display = 'none';\n\t}\n\t// Get all elements with class=\"tabLinks\" and remove the class \"active\"\n\ttabLinks = document.getElementsByClassName( 'tab-links' );\n\tfor ( i = 0; i < tabLinks.length; i++ ) {\n\t\ttabLinks[ i ].className = tabLinks[ i ].className.replace(\n\t\t\t' active',\n\t\t\t''\n\t\t);\n\t}\n\t//Creates tab content if not already created\n\t// Show the current tab, and add an \"active\" class to the button that opened the tab\n\tlet activeTab = event.target.id;\n\tlet tab = document.getElementById( activeTab );\n\ttab.className += ' active';\n\tif ( activeTab != undefined ) {\n\t\tactiveTab += '-content';\n\t\tdocument.getElementById( activeTab ).style.display = 'block';\n\t\t//this might not be working either way\n\t}\n}\n\nexport function generateInfoBox( tableData ) {\n\tlet container = document.getElementById( 'content-container' );\n\tlet infoBox = document.getElementById( 'system-information-content' );\n\n\tif ( infoBox === undefined || infoBox === null ) {\n\t\tinfoBox = document.createElement( 'div' );\n\t\tinfoBox.setAttribute( 'id', 'system-information-content' );\n\t}\n\n\t//Creates table\n\tlet displayTable = document.createElement( 'table' );\n\n\tdisplayTable.setAttribute( 'class', 'info-table' );\n\tdisplayTable.setAttribute( 'id', 'all-systems-table' );\n\n\t//Populates rows:\n\tlet labels = [];\n\tlet values = [];\n\tfor ( const data in tableData ) {\n\t\tlabels.push( data );\n\t\tvalues.push( tableData[ data ] );\n\t}\n\n\tfor ( let i = 0; i < labels.length; i++ ) {\n\t\tlet row = displayTable.insertRow( i );\n\t\tlet label = row.insertCell( 0 );\n\t\tlet value = row.insertCell( 1 );\n\t\tlabel.innerHTML = labels[ i ];\n\t\tvalue.innerHTML = values[ i ];\n\t}\n\tcontainer.appendChild( infoBox );\n\tinfoBox.appendChild( displayTable );\n}\n\n//hex.system.systemData.economy.tradeData, \"system-trade-table\", \"system-trade\"\nexport function generateTradeBox( data ) {\n\tlet supply = data.tradeInfo.supply;\n\tlet demand = data.tradeInfo.demand;\n\tlet container = document.getElementById( 'content-container' );\n\tlet tradeBox = document.getElementById( 'system-trade-content' );\n\n\tif ( tradeBox === null ) {\n\t\ttradeBox = document.createElement( 'div' );\n\t\ttradeBox.setAttribute( 'id', 'system-trade-content' );\n\t}\n\t//Creates table\n\tlet displayTable = document.createElement( 'table' );\n\tlet tblbody = document.createElement( 'tbody' );\n\tdisplayTable.setAttribute( 'class', 'info-table' );\n\n\t//Populates rows:\n\tlet supplyIndex = [];\n\tlet demandIndex = [];\n\n\tlet goodsList = TRADEGOODS.map( ( { goodsName } ) => goodsName );\n\n\tgoodsList.forEach( ( item, index ) => {\n\t\tlet matchSupply = supply.find( ( { good } ) => good === item );\n\t\tif ( matchSupply ) {\n\t\t\tsupplyIndex.push( {\n\t\t\t\tindex: index,\n\t\t\t\tamount: matchSupply.supplyAmount,\n\t\t\t\tprice: matchSupply.price,\n\t\t\t} );\n\t\t}\n\t\tlet matchDemand = demand.find( ( { good } ) => good === item );\n\t\tif ( matchDemand ) {\n\t\t\tdemandIndex.push( {\n\t\t\t\tindex: index,\n\t\t\t\tamount: matchDemand.demandAmount,\n\t\t\t\tprice: matchDemand.price,\n\t\t\t} );\n\t\t}\n\t} );\n\n\t//Create Headings:\n\tlet headingRow = document.createElement( 'tr' );\n\tlet label1Cell = document.createElement( 'td' );\n\tlet label1CellText = document.createTextNode( 'Trade Goods' );\n\n\tlet label2Cell = document.createElement( 'td' );\n\tlet label2CellText = document.createTextNode( 'Supply' );\n\n\tlet label3Cell = document.createElement( 'td' );\n\tlet label3CellText = document.createTextNode( 'Demand' );\n\n\tlabel1Cell.appendChild( label1CellText );\n\tlabel2Cell.appendChild( label2CellText );\n\tlabel3Cell.appendChild( label3CellText );\n\n\theadingRow.appendChild( label1Cell );\n\theadingRow.appendChild( label2Cell );\n\theadingRow.appendChild( label3Cell );\n\n\ttblbody.appendChild( headingRow );\n\n\tfor ( let i = 0; i < goodsList.length; i++ ) {\n\t\tlet row = document.createElement( 'tr' );\n\n\t\tlet goodsListCell = document.createElement( 'td' );\n\t\tlet supplyIndexCell = document.createElement( 'td' );\n\t\tlet demandIndexCell = document.createElement( 'td' );\n\n\t\tlet goodsListText = document.createTextNode( goodsList[ i ] );\n\n\t\tlet supplyItem = supplyIndex.find( ( { index } ) => index === i );\n\t\tlet demandItem = demandIndex.find( ( { index } ) => index === i );\n\n\t\tlet supplyPriceText = document.createTextNode( 'Not available' );\n\t\tlet demandPriceText = document.createTextNode( 'Not needed' );\n\n\t\tif ( supplyItem ) {\n\t\t\tsupplyPriceText = document.createTextNode(\n\t\t\t\t`${ supplyItem.amount } units, at ${ supplyItem.price } per unit`\n\t\t\t);\n\t\t}\n\t\tif ( demandItem ) {\n\t\t\tdemandPriceText = document.createTextNode(\n\t\t\t\t`${ demandItem.amount } units, at ${ demandItem.price } per unit`\n\t\t\t);\n\t\t}\n\n\t\tgoodsListCell.appendChild( goodsListText );\n\t\tsupplyIndexCell.appendChild( supplyPriceText );\n\t\tdemandIndexCell.appendChild( demandPriceText );\n\n\t\trow.appendChild( goodsListCell );\n\t\trow.appendChild( supplyIndexCell );\n\t\trow.appendChild( demandIndexCell );\n\n\t\tif (\n\t\t\t! (\n\t\t\t\tsupplyPriceText.textContent === 'Not available' &&\n\t\t\t\tdemandPriceText.textContent === 'Not needed'\n\t\t\t)\n\t\t) {\n\t\t\ttblbody.appendChild( row );\n\t\t}\n\t}\n\tcontainer.appendChild( tradeBox );\n\tdisplayTable.appendChild( tblbody );\n\ttradeBox.appendChild( displayTable );\n}\n//Bring into standard with above table\n//Currently not working\nexport function allSystemsTable( systemsList ) {\n\tlet systemsBox = document.getElementById( 'all-systems-content' );\n\t//Creates table\n\tlet displayTable = document.createElement( 'table' );\n\n\tdocument.getElementById( 'content-container' ).style.height = `${\n\t\tdocument.getElementById( 'svg-container' ).offsetHeight\n\t}px`;\n\n\tdisplayTable.setAttribute( 'class', 'info-table' );\n\tdisplayTable.setAttribute( 'id', 'all-systems-table' );\n\tsystemsBox.appendChild( displayTable );\n\t//Creates headings - Maybe there's a better way of doing it?\n\tlet headings = displayTable.insertRow( 0 );\n\tlet headingHex = headings.insertCell( 0 );\n\theadingHex.innerHTML = 'Hex';\n\tlet headingName = headings.insertCell( 1 );\n\theadingName.innerHTML = 'Name';\n\tlet headingUWP = headings.insertCell( 2 );\n\theadingUWP.innerHTML = 'UWP';\n\n\t//Creates rows\n\tfor ( let i = 1; i <= systemsList.length; i++ ) {\n\t\tlet listKey = systemsList[ i - 1 ][ 0 ];\n\t\tlet listItem = systemsList[ i - 1 ][ 1 ];\n\n\t\tlet row = displayTable.insertRow( i );\n\t\tlet hex = row.insertCell( 0 );\n\t\thex.setAttribute( 'class', 'allSystemsCell' );\n\t\tlet name = row.insertCell( 1 );\n\t\tname.setAttribute( 'class', 'allSystemsCell' );\n\t\tlet uwp = row.insertCell( 2 );\n\t\tuwp.setAttribute( 'class', 'allSystemsCell' );\n\n\t\trow.setAttribute( 'id', `Row: ${ listKey }` );\n\t\trow.setAttribute( 'class', 'allSystemsRow' );\n\n\t\tlet relatedHex;\n\t\trow.onmouseover = ( event ) => {\n\t\t\tlet selectedRowHex = event.currentTarget.id;\n\t\t\tlet hexKey = DOMIdToHexKeyMap.get( selectedRowHex );\n\t\t\trelatedHex = getSystem( hexKey );\n\t\t\tlet rowCells = event.currentTarget.childNodes;\n\t\t\trowCells.forEach( function ( cell ) {\n\t\t\t\tcell.setAttribute( 'class', 'allSystemsCellHover' );\n\t\t\t} );\n\t\t\tdocument\n\t\t\t\t.getElementById( `${ relatedHex.id }` )\n\t\t\t\t.setAttribute( 'class', 'hover-hex' );\n\t\t\t//this doesn't leave the original hex as clicked-hex\n\t\t};\n\t\trow.onmouseout = ( event ) => {\n\t\t\tlet selectedRowHex = event.currentTarget.id;\n\t\t\tlet hexKey = DOMIdToHexKeyMap.get( selectedRowHex );\n\t\t\trelatedHex = getSystem( hexKey );\n\t\t\tlet rowCells = event.currentTarget.childNodes;\n\t\t\trowCells.forEach( function ( cell ) {\n\t\t\t\tcell.setAttribute( 'class', 'allSystemsCell' );\n\t\t\t} );\n\t\t\tlet relatedHexPolygon = document.getElementById(\n\t\t\t\t`${ relatedHex.id }`\n\t\t\t);\n\t\t\tif ( relatedHexPolygon.getAttribute( 'class' ) != 'clicked-hex' ) {\n\t\t\t\trelatedHexPolygon.setAttribute( 'class', 'hex' );\n\t\t\t}\n\t\t};\n\t\trow.onclick = function () {\n\t\t\trelatedHex.hexOnClick( relatedHex );\n\t\t\tdocument\n\t\t\t\t.getElementById( `${ relatedHex.id }` )\n\t\t\t\t.setAttribute( 'class', 'clicked-hex' );\n\t\t};\n\n\t\thex.innerHTML = listItem.hex;\n\t\tname.innerHTML = listItem.name;\n\t\tuwp.innerHTML = listItem.uwp;\n\t}\n}\n//Code from https://stackoverflow.com/questions/45408920/plain-javascript-scrollintoview-inside-div\nexport function scrollParentToChild( parent, child ) {\n\t// Where is the parent on page\n\tvar parentRect = parent.getBoundingClientRect();\n\t// What can you see?\n\tvar parentViewableArea = {\n\t\theight: parent.clientHeight,\n\t\twidth: parent.clientWidth,\n\t};\n\n\t// Where is the child\n\tvar childRect = child.getBoundingClientRect();\n\t// Is the child viewable?\n\tvar isViewable =\n\t\tchildRect.top >= parentRect.top &&\n\t\tchildRect.bottom <= parentRect.top + parentViewableArea.height;\n\n\t// if you can't see the child try to scroll parent\n\tif ( ! isViewable ) {\n\t\t// Should we scroll using top or bottom? Find the smaller ABS adjustment\n\t\tconst scrollTop = childRect.top - parentRect.top;\n\t\tconst scrollBot = childRect.bottom - parentRect.bottom;\n\t\tif ( Math.abs( scrollTop ) < Math.abs( scrollBot ) ) {\n\t\t\t// we're near the top of the list\n\t\t\tparent.scrollTop += scrollTop;\n\t\t} else {\n\t\t\t// we're near the bottom of the list\n\t\t\tparent.scrollTop += scrollBot;\n\t\t}\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n/* eslint-disable no-console */\nconsole.log( 'Hello World! (from create-block-hex-map-plugin block)' );\nimport { generateMap, resetMap } from \"./modules/mapCode\";\nimport { runTradeSimulation } from \"./modules/simulation\";\ndocument.getElementById('generator-button').addEventListener(\"click\", generateMap);\ndocument.getElementById('reset-button').addEventListener(\"click\", resetMap)\ndocument.getElementById('run-button').addEventListener(\"click\", runTradeSimulation)\n/* eslint-enable no-console */\n"],"names":["TRADECODES","TRADEGOODS","BASICTRADEGOODS","TradeRoute","getSectorData","getSystem","uniformCostSearchSystems","Economy","constructor","hexKey","techLevel","government","popRoll","tradeCodes","govtTier","tradeCapacity","setTradeCapacity","tradeInfo","setTradeInfo","tradeBalance","tradeRange","setTradeRange","tradeRoutes","Map","pop","tradeMultiplier","includes","supplyArray","demandArray","forEach","code","codeArray","push","setSupply","setDemand","supply","demand","setInitialPricing","setSystemModifiers","modifiers","supplies","codeConst","newGoods","tradeGoods","good","tradeGood","getGoodsDetails","supplyAmount","modifier","supplyEffect","goodsClass","strength","id","goodsName","basePrice","foundDemand","demands","demandsArray","demandAmount","demandEffect","foundSupply","goodID","selectedGood","find","updatedSupply","updateSupply","updatedDemand","updateDemand","price","tech","findTradePartners","startKey","tradePartnersList","setTradeRoutes","hex","system","tradeRoute","set","console","log","Template","codeName","codeClass","As","De","Fl","Ga","He","Ic","Oc","Va","Wa","Di","Ba","Lo","Ni","Ph","Hi","Pa","Ag","Na","Pi","In","Po","Pr","Ri","openTab","generateInfoBox","generateTradeBox","rollDice","direction_differences","DOMIdToHexKeyMap","HexKeyToDOMIdMap","scrollParentToChild","System","Sector","col","row","scale","TradeMap","systemList","SectorMap","makeSectorMap","hexContainer","document","createElementNS","setAttribute","getElementById","appendChild","margin","r","svgHeight","Math","sqrt","svgWidth","floor","hexGroup","tradeGroup","c","colNum","rowNum","Hex","tableRow","name","tableData","Name","uwp","UWP","edges","setEdges","hexSize","centerPoint","hexCenter","setSystem","moveCost","setMoveCost","hexDOM","createHex","x","y","centerpoint","newHex","newHexGroup","hexPoints","addEventListener","hexOnClick","onmouseover","rowId","get","container","relatedTableEntry","rowCells","childNodes","cell","onmouseout","table","setMarker","info","trade","currentTab","getElementsByClassName","currentTabID","target","hasChildNodes","innerHTML","economicData","querySelectorAll","points","i","angleDeg","angleRad","PI","xPoint","cos","yPoint","sin","cx","cy","mark","cost","colMax","rowMax","parity","dif","direction","edgeCol","edgeRow","key","allSystemsTable","generateMap","e","dataContainer","gen","parentElement","value","length","style","display","tab","t","tabLinks","className","replace","height","offsetHeight","sectorDataContainer","resetMap","systemContent","oldSystem","firstElementChild","allContent","oldAll","removeChild","mapContainer","map","PriorityQueue","heap","getLeftChildIndex","parentIndex","getRightChildIndex","getParentIndex","childIndex","hasLeftChild","index","hasRightChild","hasParent","leftChild","rightChild","parent","swap","indexOne","indexTwo","temp","peek","item","heapifyDown","put","heapifyUp","smallerChildIndex","isEmpty","start","range","frontier","sectorData","graph","reached","costSoFar","currentKey","current","neighbours","costToHere","newCost","has","uniformCostSearchPathfinder","goal","cameFrom","reconstructPath","path","reverse","runTradeSimulation","sector","activeHexes","checkActiveHex","maxValue","origin","tradePartners","route","tradeRouteVolume","routeHexesArray","drawConnectingLine","makeTrades","originKey","originHex","originSupply","originDemands","availableSalePrices","availablePurchasePrices","highestSalePrice","lowestPurchasePrice","endKey","endHex","endDemands","highestPriceEntry","max","demandHex","findIndex","sellAmount","setAmount","amountSold","endSupply","lowestPriceEntry","min","supplyHex","buyAmount","amountBought","SYSTEM","TRADECODEREQS","systemRolls","setSystemRolls","systemData","setSystemData","setUWP","setTableData","planetSize","atmoType","hydroMod","atmo","hydroResult","govRoll","govType","lawRoll","starport","starportDM","sizeDM","atmoDM","hydroDM","popDM","govDM","TL","systemName","generateName","size","setSize","atmosphere","setAtmosphere","hydrographics","setHydrographics","population","setPopulation","setGovernment","lawLevel","setLaw","setTL","setStarport","setTradeCodes","formattedPop","totalPopulation","toLocaleString","tradeCodeLongArray","formattedTradeCodes","formatedHydroPercent","hydroPercent","join","Size","Gravity","gravity","Atmosphere","psi","Hydropgraphics","Population","Government","governmentType","tl","randString","random","toString","substr","sizeRoll","sizeIndex","SIZE","GRAVITY","atmoRoll","psiCalc","atmoIndex","PSIMIN","PSIMAX","ATMO","hydro","hydroIndex","hydroCalc","HYDROMIN","HYDROMAX","hydroDesc","HYDRO","totalPop","pow","govIndex","GOV","law","stClass","techRoll","rolls","reqArray","tradeCodesArray","gov","req","checkArray","siz","atm","hyd","numToHex","num","toUpperCase","end","maxRange","routeKey","findRoute","startSystem","endSystem","startTradeInfo","endTradeInfo","routeTradeCapacity","setHighestTradeCapacity","tradeRouteProfit","tradeRouteDetails","pathFinder","startCapacity","endCapacity","exchangeGoods","startTradeData","sellingIdArray","sellGood","buyGood","type","undefined","calculateSale","buyingIdArray","maxSellOffer","maxBuyOffer","exchangeArray","offerAmount","sellPrice","profit","sale","exchangeType","goodId","pathArray","width","calculateTradeRouteWidth","newPath","pathStart","pathString","step","stepCoords","tradeRouteOnClick","routeValue","maxWidth","widthPercent","tanh","SectorTradeRoutes","clickedRoute","originGood","partnerGood","amountArray","lowest","numDice","total","event","tabContent","activeTab","infoBox","createElement","displayTable","labels","values","data","insertRow","label","insertCell","tradeBox","tblbody","supplyIndex","demandIndex","goodsList","matchSupply","amount","matchDemand","headingRow","label1Cell","label1CellText","createTextNode","label2Cell","label2CellText","label3Cell","label3CellText","goodsListCell","supplyIndexCell","demandIndexCell","goodsListText","supplyItem","demandItem","supplyPriceText","demandPriceText","textContent","systemsList","systemsBox","headings","headingHex","headingName","headingUWP","listKey","listItem","relatedHex","selectedRowHex","currentTarget","relatedHexPolygon","getAttribute","onclick","child","parentRect","getBoundingClientRect","parentViewableArea","clientHeight","clientWidth","childRect","isViewable","top","bottom","scrollTop","scrollBot","abs"],"sourceRoot":""}